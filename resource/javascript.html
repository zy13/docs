<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>♥-v8引擎及js代码的执行 | zy&#39;s docs</title>
    <meta name="description" content="Welcome!">
    <limk rel="icon" href="/docs/logo.png"></limk>
  <link rel="manifest" href="/docs/manifest.json">
  <meta name="theme-color" content="#ccc">
    
    <link rel="preload" href="/docs/assets/css/0.styles.8912bdf8.css" as="style"><link rel="preload" href="/docs/assets/js/app.acf4c017.js" as="script"><link rel="preload" href="/docs/assets/js/9.3939e875.js" as="script"><link rel="preload" href="/docs/assets/js/221.2383e08f.js" as="script"><link rel="prefetch" href="/docs/assets/js/68.0949f5a6.js"><link rel="prefetch" href="/docs/assets/js/1.6a2045ef.js"><link rel="prefetch" href="/docs/assets/js/2.b5f3db6a.js"><link rel="prefetch" href="/docs/assets/js/3.219f09ba.js"><link rel="prefetch" href="/docs/assets/js/4.8ee55220.js"><link rel="prefetch" href="/docs/assets/js/5.87cde8e5.js"><link rel="prefetch" href="/docs/assets/js/6.0e65e52f.js"><link rel="prefetch" href="/docs/assets/js/7.61916ad4.js"><link rel="prefetch" href="/docs/assets/js/8.c2320f88.js"><link rel="prefetch" href="/docs/assets/js/10.ab015975.js"><link rel="prefetch" href="/docs/assets/js/11.f26d0dbe.js"><link rel="prefetch" href="/docs/assets/js/12.a83b5e17.js"><link rel="prefetch" href="/docs/assets/js/13.3f4ce23b.js"><link rel="prefetch" href="/docs/assets/js/14.788d1837.js"><link rel="prefetch" href="/docs/assets/js/15.4578a994.js"><link rel="prefetch" href="/docs/assets/js/16.c88f046d.js"><link rel="prefetch" href="/docs/assets/js/17.bda3b65a.js"><link rel="prefetch" href="/docs/assets/js/18.f51293d6.js"><link rel="prefetch" href="/docs/assets/js/19.e23bdb82.js"><link rel="prefetch" href="/docs/assets/js/20.9a922dab.js"><link rel="prefetch" href="/docs/assets/js/21.2c6da050.js"><link rel="prefetch" href="/docs/assets/js/22.6118c2ea.js"><link rel="prefetch" href="/docs/assets/js/23.ce4cf644.js"><link rel="prefetch" href="/docs/assets/js/24.ae10fafa.js"><link rel="prefetch" href="/docs/assets/js/25.928437eb.js"><link rel="prefetch" href="/docs/assets/js/26.8cb0b9b6.js"><link rel="prefetch" href="/docs/assets/js/27.382eb8da.js"><link rel="prefetch" href="/docs/assets/js/28.17c15003.js"><link rel="prefetch" href="/docs/assets/js/29.d47780b1.js"><link rel="prefetch" href="/docs/assets/js/30.ca5d8646.js"><link rel="prefetch" href="/docs/assets/js/31.e97fc58f.js"><link rel="prefetch" href="/docs/assets/js/32.0c64de17.js"><link rel="prefetch" href="/docs/assets/js/33.930d6f78.js"><link rel="prefetch" href="/docs/assets/js/34.6fecaaf4.js"><link rel="prefetch" href="/docs/assets/js/35.15ec5007.js"><link rel="prefetch" href="/docs/assets/js/36.111dbe33.js"><link rel="prefetch" href="/docs/assets/js/37.c2b3add1.js"><link rel="prefetch" href="/docs/assets/js/38.828abaf6.js"><link rel="prefetch" href="/docs/assets/js/39.734a24da.js"><link rel="prefetch" href="/docs/assets/js/40.e69160d7.js"><link rel="prefetch" href="/docs/assets/js/41.dd684a74.js"><link rel="prefetch" href="/docs/assets/js/42.309aa73e.js"><link rel="prefetch" href="/docs/assets/js/43.79668988.js"><link rel="prefetch" href="/docs/assets/js/44.167ed7a1.js"><link rel="prefetch" href="/docs/assets/js/45.70f35d40.js"><link rel="prefetch" href="/docs/assets/js/46.c9b62498.js"><link rel="prefetch" href="/docs/assets/js/47.8555fc5c.js"><link rel="prefetch" href="/docs/assets/js/48.ef9f36c4.js"><link rel="prefetch" href="/docs/assets/js/49.f36e6af6.js"><link rel="prefetch" href="/docs/assets/js/50.ce7d469f.js"><link rel="prefetch" href="/docs/assets/js/51.1bc4f677.js"><link rel="prefetch" href="/docs/assets/js/52.3ad516c7.js"><link rel="prefetch" href="/docs/assets/js/53.74e97523.js"><link rel="prefetch" href="/docs/assets/js/54.0fb41450.js"><link rel="prefetch" href="/docs/assets/js/55.2bafb766.js"><link rel="prefetch" href="/docs/assets/js/56.f7fc87ce.js"><link rel="prefetch" href="/docs/assets/js/57.e58e92d4.js"><link rel="prefetch" href="/docs/assets/js/58.e1315a5a.js"><link rel="prefetch" href="/docs/assets/js/59.2db26cda.js"><link rel="prefetch" href="/docs/assets/js/60.7d1dd448.js"><link rel="prefetch" href="/docs/assets/js/61.23f37ee9.js"><link rel="prefetch" href="/docs/assets/js/62.147ba493.js"><link rel="prefetch" href="/docs/assets/js/63.e7d1038b.js"><link rel="prefetch" href="/docs/assets/js/64.19b6fa3d.js"><link rel="prefetch" href="/docs/assets/js/65.46aa7ef7.js"><link rel="prefetch" href="/docs/assets/js/66.04d3893a.js"><link rel="prefetch" href="/docs/assets/js/67.178c9fba.js"><link rel="prefetch" href="/docs/assets/js/69.c2893f3a.js"><link rel="prefetch" href="/docs/assets/js/70.7a2a176e.js"><link rel="prefetch" href="/docs/assets/js/71.ba13bf2a.js"><link rel="prefetch" href="/docs/assets/js/72.9a0ab200.js"><link rel="prefetch" href="/docs/assets/js/73.932aa523.js"><link rel="prefetch" href="/docs/assets/js/74.8e601453.js"><link rel="prefetch" href="/docs/assets/js/75.50d34247.js"><link rel="prefetch" href="/docs/assets/js/76.42fcca85.js"><link rel="prefetch" href="/docs/assets/js/77.209afa80.js"><link rel="prefetch" href="/docs/assets/js/78.e6a098a4.js"><link rel="prefetch" href="/docs/assets/js/79.df755869.js"><link rel="prefetch" href="/docs/assets/js/80.8485996a.js"><link rel="prefetch" href="/docs/assets/js/81.e1346e6c.js"><link rel="prefetch" href="/docs/assets/js/82.b6a82fab.js"><link rel="prefetch" href="/docs/assets/js/83.3a0aad16.js"><link rel="prefetch" href="/docs/assets/js/84.db8784c0.js"><link rel="prefetch" href="/docs/assets/js/85.b577b1a5.js"><link rel="prefetch" href="/docs/assets/js/86.dc089bcc.js"><link rel="prefetch" href="/docs/assets/js/87.18718c47.js"><link rel="prefetch" href="/docs/assets/js/88.45a535b3.js"><link rel="prefetch" href="/docs/assets/js/89.f4403f46.js"><link rel="prefetch" href="/docs/assets/js/90.88b43a93.js"><link rel="prefetch" href="/docs/assets/js/91.8da65492.js"><link rel="prefetch" href="/docs/assets/js/92.4feea20b.js"><link rel="prefetch" href="/docs/assets/js/93.d45ed88a.js"><link rel="prefetch" href="/docs/assets/js/94.9d832728.js"><link rel="prefetch" href="/docs/assets/js/95.b3dfb83f.js"><link rel="prefetch" href="/docs/assets/js/96.656fee38.js"><link rel="prefetch" href="/docs/assets/js/97.6eff8f66.js"><link rel="prefetch" href="/docs/assets/js/98.9f0e66bc.js"><link rel="prefetch" href="/docs/assets/js/99.032bfecd.js"><link rel="prefetch" href="/docs/assets/js/100.737761ad.js"><link rel="prefetch" href="/docs/assets/js/101.6970e95d.js"><link rel="prefetch" href="/docs/assets/js/102.74d9d087.js"><link rel="prefetch" href="/docs/assets/js/103.b7e392a0.js"><link rel="prefetch" href="/docs/assets/js/104.41a49370.js"><link rel="prefetch" href="/docs/assets/js/105.1019523a.js"><link rel="prefetch" href="/docs/assets/js/106.73b7319e.js"><link rel="prefetch" href="/docs/assets/js/107.9f2f6271.js"><link rel="prefetch" href="/docs/assets/js/108.77620658.js"><link rel="prefetch" href="/docs/assets/js/109.a2956b0d.js"><link rel="prefetch" href="/docs/assets/js/110.23a3ce76.js"><link rel="prefetch" href="/docs/assets/js/111.4ccc0dde.js"><link rel="prefetch" href="/docs/assets/js/112.30932a5c.js"><link rel="prefetch" href="/docs/assets/js/113.14372203.js"><link rel="prefetch" href="/docs/assets/js/114.752dee54.js"><link rel="prefetch" href="/docs/assets/js/115.b6e134e2.js"><link rel="prefetch" href="/docs/assets/js/116.5f0b7e73.js"><link rel="prefetch" href="/docs/assets/js/117.2e438b40.js"><link rel="prefetch" href="/docs/assets/js/118.7bc71357.js"><link rel="prefetch" href="/docs/assets/js/119.7a632ac0.js"><link rel="prefetch" href="/docs/assets/js/120.4fa561c7.js"><link rel="prefetch" href="/docs/assets/js/121.6fea8d64.js"><link rel="prefetch" href="/docs/assets/js/122.1dcd7eb4.js"><link rel="prefetch" href="/docs/assets/js/123.748e1cfa.js"><link rel="prefetch" href="/docs/assets/js/124.fb88d2ce.js"><link rel="prefetch" href="/docs/assets/js/125.30c58dc4.js"><link rel="prefetch" href="/docs/assets/js/126.4928e376.js"><link rel="prefetch" href="/docs/assets/js/127.e4004279.js"><link rel="prefetch" href="/docs/assets/js/128.58004c99.js"><link rel="prefetch" href="/docs/assets/js/129.25166f4c.js"><link rel="prefetch" href="/docs/assets/js/130.ab0b2d61.js"><link rel="prefetch" href="/docs/assets/js/131.cf363208.js"><link rel="prefetch" href="/docs/assets/js/132.b3ccf5bc.js"><link rel="prefetch" href="/docs/assets/js/133.193edc8a.js"><link rel="prefetch" href="/docs/assets/js/134.a208587f.js"><link rel="prefetch" href="/docs/assets/js/135.fd1e63d4.js"><link rel="prefetch" href="/docs/assets/js/136.86a1f4c5.js"><link rel="prefetch" href="/docs/assets/js/137.4291ce53.js"><link rel="prefetch" href="/docs/assets/js/138.28634585.js"><link rel="prefetch" href="/docs/assets/js/139.fc7f3ea7.js"><link rel="prefetch" href="/docs/assets/js/140.c0ed5f14.js"><link rel="prefetch" href="/docs/assets/js/141.679ce97c.js"><link rel="prefetch" href="/docs/assets/js/142.78e11f14.js"><link rel="prefetch" href="/docs/assets/js/143.7162ae6a.js"><link rel="prefetch" href="/docs/assets/js/144.872d5b44.js"><link rel="prefetch" href="/docs/assets/js/145.d4440db9.js"><link rel="prefetch" href="/docs/assets/js/146.11b5e61f.js"><link rel="prefetch" href="/docs/assets/js/147.5904dff6.js"><link rel="prefetch" href="/docs/assets/js/148.40256055.js"><link rel="prefetch" href="/docs/assets/js/149.96a4a846.js"><link rel="prefetch" href="/docs/assets/js/150.95d5f63c.js"><link rel="prefetch" href="/docs/assets/js/151.f623d9c2.js"><link rel="prefetch" href="/docs/assets/js/152.bdda962f.js"><link rel="prefetch" href="/docs/assets/js/153.6277a739.js"><link rel="prefetch" href="/docs/assets/js/154.4fa949c9.js"><link rel="prefetch" href="/docs/assets/js/155.a2861ac9.js"><link rel="prefetch" href="/docs/assets/js/156.ba791bf0.js"><link rel="prefetch" href="/docs/assets/js/157.82f5bd05.js"><link rel="prefetch" href="/docs/assets/js/158.d00242c1.js"><link rel="prefetch" href="/docs/assets/js/159.f6b62543.js"><link rel="prefetch" href="/docs/assets/js/160.f7691c52.js"><link rel="prefetch" href="/docs/assets/js/161.5de90b23.js"><link rel="prefetch" href="/docs/assets/js/162.ac6d4c38.js"><link rel="prefetch" href="/docs/assets/js/163.e43bf690.js"><link rel="prefetch" href="/docs/assets/js/164.fd225455.js"><link rel="prefetch" href="/docs/assets/js/165.33faf5d8.js"><link rel="prefetch" href="/docs/assets/js/166.43c39690.js"><link rel="prefetch" href="/docs/assets/js/167.f60f53cf.js"><link rel="prefetch" href="/docs/assets/js/168.0377ea50.js"><link rel="prefetch" href="/docs/assets/js/169.f2bf444d.js"><link rel="prefetch" href="/docs/assets/js/170.637798a1.js"><link rel="prefetch" href="/docs/assets/js/171.4d9edaa7.js"><link rel="prefetch" href="/docs/assets/js/172.20a017d5.js"><link rel="prefetch" href="/docs/assets/js/173.229ef695.js"><link rel="prefetch" href="/docs/assets/js/174.1d341fad.js"><link rel="prefetch" href="/docs/assets/js/175.ff21c2fa.js"><link rel="prefetch" href="/docs/assets/js/176.58bdd20d.js"><link rel="prefetch" href="/docs/assets/js/177.4b6e419c.js"><link rel="prefetch" href="/docs/assets/js/178.c38eacae.js"><link rel="prefetch" href="/docs/assets/js/179.2102ca04.js"><link rel="prefetch" href="/docs/assets/js/180.0acc8e12.js"><link rel="prefetch" href="/docs/assets/js/181.1191a3b6.js"><link rel="prefetch" href="/docs/assets/js/182.854004ca.js"><link rel="prefetch" href="/docs/assets/js/183.0a0e5b66.js"><link rel="prefetch" href="/docs/assets/js/184.8d8015dc.js"><link rel="prefetch" href="/docs/assets/js/185.1bab7135.js"><link rel="prefetch" href="/docs/assets/js/186.028e62aa.js"><link rel="prefetch" href="/docs/assets/js/187.9c630c62.js"><link rel="prefetch" href="/docs/assets/js/188.9e84d370.js"><link rel="prefetch" href="/docs/assets/js/189.a30ad706.js"><link rel="prefetch" href="/docs/assets/js/190.c8eedc5c.js"><link rel="prefetch" href="/docs/assets/js/191.bb2173bd.js"><link rel="prefetch" href="/docs/assets/js/192.2ce27902.js"><link rel="prefetch" href="/docs/assets/js/193.d991abd1.js"><link rel="prefetch" href="/docs/assets/js/194.b4413a9a.js"><link rel="prefetch" href="/docs/assets/js/195.92e73aa3.js"><link rel="prefetch" href="/docs/assets/js/196.adc1244a.js"><link rel="prefetch" href="/docs/assets/js/197.746b2621.js"><link rel="prefetch" href="/docs/assets/js/198.7b75e1dc.js"><link rel="prefetch" href="/docs/assets/js/199.813641d3.js"><link rel="prefetch" href="/docs/assets/js/200.29bcba4f.js"><link rel="prefetch" href="/docs/assets/js/201.10afeca4.js"><link rel="prefetch" href="/docs/assets/js/202.e6442c0a.js"><link rel="prefetch" href="/docs/assets/js/203.78d9f101.js"><link rel="prefetch" href="/docs/assets/js/204.11c2c1a6.js"><link rel="prefetch" href="/docs/assets/js/205.abddd1a3.js"><link rel="prefetch" href="/docs/assets/js/206.956e1f42.js"><link rel="prefetch" href="/docs/assets/js/207.4299c1ed.js"><link rel="prefetch" href="/docs/assets/js/208.4559c4e3.js"><link rel="prefetch" href="/docs/assets/js/209.7831ea49.js"><link rel="prefetch" href="/docs/assets/js/210.6c8328c6.js"><link rel="prefetch" href="/docs/assets/js/211.15e4b810.js"><link rel="prefetch" href="/docs/assets/js/212.462bf149.js"><link rel="prefetch" href="/docs/assets/js/213.78fd74e8.js"><link rel="prefetch" href="/docs/assets/js/214.d1299a62.js"><link rel="prefetch" href="/docs/assets/js/215.bb04e4d4.js"><link rel="prefetch" href="/docs/assets/js/216.98d1168a.js"><link rel="prefetch" href="/docs/assets/js/217.ac94712a.js"><link rel="prefetch" href="/docs/assets/js/218.b1f0aba6.js"><link rel="prefetch" href="/docs/assets/js/219.8ce0675a.js"><link rel="prefetch" href="/docs/assets/js/220.7186b642.js"><link rel="prefetch" href="/docs/assets/js/222.0d7d0baa.js">
    <link rel="stylesheet" href="/docs/assets/css/0.styles.8912bdf8.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div><a href="/docs/" class="home-link router-link-active"><!----><span class="site-name">
      zy's docs
    </span></a><div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""><!----></div><nav class="nav-links can-hide"><div class="nav-item"><a href="/docs/kkb/" class="nav-link">高级前端</a></div><div class="nav-item"><a href="/docs/resource/" class="nav-link router-link-active">前端资源</a></div><div class="nav-item"><a href="/docs/javascript/" class="nav-link">JavaScript深入简出</a></div><div class="nav-item"><a href="/docs/javascript-wd/" class="nav-link">JavaScript教程-网道</a></div><div class="nav-item"><a href="/docs/http/" class="nav-link">HTTP权威指南</a></div><!----></nav></div></header><div class="sidebar-mask"></div><div class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/docs/kkb/" class="nav-link">高级前端</a></div><div class="nav-item"><a href="/docs/resource/" class="nav-link router-link-active">前端资源</a></div><div class="nav-item"><a href="/docs/javascript/" class="nav-link">JavaScript深入简出</a></div><div class="nav-item"><a href="/docs/javascript-wd/" class="nav-link">JavaScript教程-网道</a></div><div class="nav-item"><a href="/docs/http/" class="nav-link">HTTP权威指南</a></div><!----></nav><ul class="sidebar-links"><li><div class="sidebar-group first"><p class="sidebar-heading open"><span></span><!----></p><ul class="sidebar-group-items"><li><a href="/docs/resource/link.html" class="sidebar-link">☆-线上资源链接</a></li><li><a href="/docs/resource/http.html" class="sidebar-link">☆-HTTP协议</a></li><li><a href="/docs/resource/cache.html" class="sidebar-link">☆-HTTP缓存体系</a></li><li><a href="/docs/resource/css.html" class="sidebar-link">☆-CSS&amp;HTML</a></li><li><a href="/docs/resource/javascript.html" class="active sidebar-link">☆-JavaScript</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#♥-v8引擎及js代码的执行" class="sidebar-link">♥-v8引擎及js代码的执行</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-原型设计模式" class="sidebar-link">☆-原型设计模式</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-基础考察" class="sidebar-link">☆-基础考察</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-其他类型值转换为字符串时的规则" class="sidebar-link">☆-其他类型值转换为字符串时的规则</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-其他类型值转换为数字时的规则" class="sidebar-link">☆-其他类型值转换为数字时的规则</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-object-is-和-、-的区别" class="sidebar-link">☆-Object.is()和&quot;===&quot;、&quot;==&quot;的区别</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-commonjs-模块" class="sidebar-link">☆-CommonJS 模块</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-es6-模块" class="sidebar-link">☆-ES6 模块</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#♥-commonjs模块与es6模块的区别" class="sidebar-link">♥-CommonJS模块与ES6模块的区别</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-commonjs中module-exports和exports的区别" class="sidebar-link">☆-Commonjs中module.exports和exports的区别</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-请解释原型设计模式" class="sidebar-link">☆-请解释原型设计模式</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-js判断变量的类型" class="sidebar-link">☆-JS判断变量的类型</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#♥-防抖与节流" class="sidebar-link">♥-防抖与节流</a></li><li class="sidebar-sub-header"><a href="/docs/resource/javascript.html#☆-window-onload和domcontentloaded区别是什么" class="sidebar-link">☆-Window.onload和DOMContentLoaded区别是什么</a></li></ul></li><li><a href="/docs/resource/react.html" class="sidebar-link">☆-react</a></li><li><a href="/docs/resource/vue.html" class="sidebar-link">☆-vue</a></li><li><a href="/docs/resource/bs.html" class="sidebar-link">☆-浏览器</a></li><li><a href="/docs/resource/http-1.html" class="sidebar-link">☆-http</a></li><li><a href="/docs/resource/coding.html" class="sidebar-link">☆-手撕代码</a></li></ul></div></li></ul></div><div class="page"><div class="content"><h2 id="♥-v8引擎及js代码的执行"><a href="#♥-v8引擎及js代码的执行" aria-hidden="true" class="header-anchor">#</a> ♥-v8引擎及js代码的执行</h2><p><a href="https://www.cnblogs.com/codexlx/p/14179920.html" target="_blank" rel="noopener noreferrer">V8引擎简介——如何编译和执行JS代码<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><p><div><div class="img-slot"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0432ac39417e4ee9b238d0b753f0f23c~tplv-k3u1fbpfcp-zoom-1.image"></div></div></p><h3 id="v8引擎工作原理"><a href="#v8引擎工作原理" aria-hidden="true" class="header-anchor">#</a> v8引擎工作原理</h3><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 假如有这样一段JavaScript源代码</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> num1 <span class="token operator">+</span> num2<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><p><code>Parse</code>解析器，会将<code>JavaScript</code>代码转换成<code>AST</code>（抽象语法树），这是因为解释器并不直接认识<code>JavaScript</code>代码；</p><ul><li>如果函数没有被调用，那么是不会被转换成<code>AST</code>的；</li><li><code>Parse</code>的<code>V8</code>官方文档：<a href="https://v8.dev/blog/scanner" target="_blank" rel="noopener noreferrer">https://v8.dev/blog/scanner<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li><p><code>Ignition</code>解释器，会将<code>AST</code>转换成<code>ByteCode</code>（字节码）；</p><ul><li>同时会收集<code>TurboFan</code>优化所需要的信息（比如函数参数的类型信息，有了类型才能进行真实的运算）；</li><li>如果函数只调用一次，<code>Ignition</code>直接解释为<code>ByteCode</code>；</li><li><code>Ignition</code>的<code>V8</code>官方文档：<a href="https://v8.dev/blog/ignition-interpreter" target="_blank" rel="noopener noreferrer">https://v8.dev/blog/ignition-interpreter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li><li><p><code>TurboFan</code>优化编译器，可以将字节码编译为<code>CPU</code>可以直接执行的机器码；</p><ul><li>如果一个函数被多次调用，那么就会被标记为热点函数，那么就会经过<code>TurboFan</code>转换成优化的机器码，提高代码的执行性能；</li><li>但是，机器码实际上也会被还原为<code>ByteCode</code>，这是因为如果后续执行函数的过程中，类型发生了变化（比如<code>sum</code>函数原来执行的是<code>number</code>类型，后来执行变成了<code>string</code>类型），之前优化的机器码并不能正确的处理运算，就会逆向的转换成字节码；</li><li><code>TurboFan</code>的<code>V8</code>官方文档：<a href="https://v8.dev/blog/turbofan-jit" target="_blank" rel="noopener noreferrer">https://v8.dev/blog/turbofan-jit<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></li></ul><h3 id="v8的内存回收"><a href="#v8的内存回收" aria-hidden="true" class="header-anchor">#</a> V8的内存回收</h3><p><a href="https://juejin.cn/post/6875714523332870157" target="_blank" rel="noopener noreferrer">V8引擎的垃圾内存回收机制<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><ul><li><code>Orinoco</code>模块，负责垃圾回收，将程序中不需要的内存回收；</li><li><code>Orinoco</code>的<code>V8</code>官方文档：<a href="https://v8.dev/blog/trash-talk" target="_blank" rel="noopener noreferrer">https://v8.dev/blog/trash-talk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul><h3 id="v8引擎"><a href="#v8引擎" aria-hidden="true" class="header-anchor">#</a> V8引擎</h3><ul><li>V8引擎是谷歌开源的高性能<code>JavaScript</code>引擎，主要工作是：</li><li>编译和执行<code>JavaScript</code></li><li>处理调用栈</li><li>内存分配</li><li>垃圾回收</li></ul><h3 id="js代码的执行"><a href="#js代码的执行" aria-hidden="true" class="header-anchor">#</a> js代码的执行</h3><p>在执行一段代码时，</p><ul><li><p><code>JS</code> 引擎会首先创建一个<strong>执行栈</strong></p></li><li><p>然后<code>JS</code>引擎会创建一个<strong>全局执行上下文</strong>，并<code>push</code>到执行栈中, 这个过程<code>JS</code>引擎会为这段代码中所有变量分配内存并赋一个初始值（<code>undefined</code>），</p></li><li><p>在创建完成后，<code>JS</code>引擎会进入执行阶段，这个过程<code>JS</code>引擎会逐行的执行代码，即
为之前分配好内存的变量逐个赋值(真实值)。</p></li><li><p>如果这段代码中存在<code>function</code>的声明和调用，那么<code>JS</code>引擎会创建一个<strong>函数执行上下文</strong>，并<code>push</code>到<strong>执行栈</strong>中，其创建和执行过程跟<strong>全局执行上下文</strong>一样。</p></li><li><p>但有特殊情况，即当函数中存在对其它函数的调用时，<code>JS</code>引擎会在父函数执行的过程中，将子函数的<strong>全局执行上下文</strong><code>push</code>到<strong>执行栈</strong>，这也是为什么子函数能够访问到父函数内所声明的变量。</p></li><li><p>还有一种特殊情况是，在子函数执行的过程中，父函数已经<code>return</code>了，这种情况下，<code>JS</code>引擎会将父函数的上下文从执行栈中移除，</p></li><li><p>与此同时，<code>JS</code>引擎会为还在执行的<strong>子函数上下文</strong>创建一个<strong>闭包</strong>，这个闭包里保存了父函数内声明的变量及其赋值，子函数仍然能够在其上下文中访问并使用这边变量/常量。</p></li><li><p>当子函数执行完毕，<code>JS</code>引擎才会将子函数的上下文及闭包一并从执行栈中移除。</p></li></ul><h3 id="js-如何处理高并发"><a href="#js-如何处理高并发" aria-hidden="true" class="header-anchor">#</a> js 如何处理高并发</h3><p>最后，<code>JS</code>引擎是单线程的，那么它是如何处理高并发的呢？即当代码中存在异步调用时<code>JS</code>是如何执行的。</p><ul><li>比如<code>setTimeout</code>或<code>fetch</code>请求都是非阻塞（<code>non-blocking</code>）的，</li><li>当异步调用代码触发时，<code>JS</code>引擎会将需要异步执行的代码移出调用栈，直到等待到返回结果，</li><li><code>JS</code>引擎会立即将与之对应的回调函数<code>push</code>进任务队列中等待被调用，</li><li>当调用(执行)栈中已经没有需要被执行的代码时，</li><li><code>JS</code>引擎会立刻将任务队列中的回调函数逐个<code>push</code>进调用栈并执行。这个过程我们也称之为<strong>事件循环</strong>。</li></ul><h3 id="附言"><a href="#附言" aria-hidden="true" class="header-anchor">#</a> 附言</h3><p>需要更深入的了解<code>JS</code>引擎，必须理解几个概念，</p><ul><li>执行上下文，</li><li>闭包，</li><li>作用域，</li><li>作用域链，</li><li>事件循环。</li></ul><p>建议去网上多看看相关文章，这里推荐一篇非常精彩的博客，对于<code>JS</code>引擎的执行做了图形化的说明，更加便于理解。</p><h2 id="☆-原型设计模式"><a href="#☆-原型设计模式" aria-hidden="true" class="header-anchor">#</a> ☆-原型设计模式</h2><ul><li><p>原型模式可用于创建新对象，但它创建的不是非初始化的对象，而是使用原型对象（或样本对
象）的值进行初始化的对象。<strong>原型模式</strong>也称为<strong>属性模式</strong>。</p></li><li><p><strong>原型模式</strong>在初始化<strong>业务对象</strong>时非常有用，业务对象的值与数据库中的默认值相匹配。原型对象中
的默认值被复制到新创建的业务对象中。</p></li><li><p>经典的编程语言很少使用原型模式，但作为原型语言的 <code>JavaScript</code> 在构造新对象及其原型时使用
了这个模式。</p></li></ul><h2 id="☆-基础考察"><a href="#☆-基础考察" aria-hidden="true" class="header-anchor">#</a> ☆-基础考察</h2><p>下面代码的输出结果是什么?</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 按顺序执行原则</span>
<span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token function">sayHi</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Lydia'</span><span class="token punctuation">;</span>
  <span class="token keyword">let</span> age <span class="token operator">=</span> <span class="token number">21</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">// A. undefined 和 undefined;</span>
<span class="token comment">// B. Lydia 和 ReferenceError;</span>
<span class="token comment">// C. ReferenceError 和 21;</span>
<span class="token comment">// D. undefined 和 ReferenceError;</span>

<span class="token comment">// 本题的考点主要是var与let的区别以及var的预解析问题。</span>
<span class="token comment">// var所声明的变量会被预解析，var name;提升到作用域最顶部，所以在开始的console.log(name)时，</span>
<span class="token comment">// name已经存在，但是由于没有赋值，所以是undefined；</span>
<span class="token comment">// 而let会有暂时性死区，也就是在let声明变量之前，你都无法使用这个变量，会抛出一个错误，故选D。</span>
</code></pre></div><p>下面代码的输出结果是什么</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>arr<span class="token punctuation">.</span><span class="token function">flat</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// es6</span>

<span class="token comment">// A. [1, 2, [3, 4, [5]]];</span>
<span class="token comment">// B. [1, 2, 3, 4, [5]];</span>
<span class="token comment">// C. [1, 2, [3, 4, 5]];</span>
<span class="token comment">// D. [1, 2, 3, 4, 5];</span>

<span class="token comment">// 这里主要是考察Array.prototype.flat方法的使用，扁平化会创建一个新的，被扁平化的数组，扁</span>
<span class="token comment">// 平化的深度取决于传入的值；这里传入的是1也就是默认值，所以数组只会被扁平化一层，相当于</span>
<span class="token comment">// [].concat([1, 2], [3, 4, [5]])，故选B。</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> name <span class="token operator">=</span> <span class="token string">'Lydia Hallie'</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> age <span class="token operator">=</span> <span class="token number">21</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Number<span class="token punctuation">.</span><span class="token function">isNaN</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">isNaN</span><span class="token punctuation">(</span>age<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A. true false true false</span>
<span class="token comment">// B. true false false false</span>
<span class="token comment">// C. false false true false</span>
<span class="token comment">// D. false true false true</span>

<span class="token comment">// 本题主要考察isNaN(es5)和Number.isNaN(es6)的区别；</span>
<span class="token comment">// 首先isNaN在调用的时候，会先将传入的参数转换为数字类型，所以非数字值传入也有可能返回true，</span>
<span class="token comment">// 所以第三个和第四个打印分别是true false；</span>
<span class="token comment">// Number.isNaN不同的地方是，他会首先判断传入的值是否为数字类型，如果不是，直接返回</span>
<span class="token comment">// false，本题中传入的是字符串类型，所以第一个和第二个打印均为false，故选C。</span>
</code></pre></div><p>以下代码运行输出为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
b <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
c <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">===</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">&gt;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">&lt;</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A: false, false, false, true </span>
<span class="token comment">// B: false, false, false, false </span>
<span class="token comment">// C: true, true, false, true </span>
<span class="token comment">// D: other</span>

<span class="token comment">// JavaScript中Array的本质也是对象，所以前两个的结果都是false， 而JavaScript中Array的'&gt;'运算</span>
<span class="token comment">// 符和'&lt;'运算符的比较方式类似于字符串比较字典序，会从第一个元素开始进行比较，如果一样比</span>
<span class="token comment">// 较第二个，还一样就比较第三个，如此类推，所以第三个结果为false，第四个为true。 综上所</span>
<span class="token comment">// 述，结果为false, false, false, true，选A</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> val <span class="token operator">=</span> <span class="token string">'smtg'</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Value is '</span> <span class="token operator">+</span> <span class="token punctuation">(</span>val <span class="token operator">===</span> <span class="token string">'smtg'</span><span class="token punctuation">)</span> <span class="token operator">?</span> <span class="token string">'Something'</span> <span class="token punctuation">:</span> <span class="token string">'Nothing'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A: Value is Something </span>
<span class="token comment">// B: Value is Nothing </span>
<span class="token comment">// C: NaN </span>
<span class="token comment">// D: other</span>

<span class="token comment">// 这题考的javascript中的运算符优先级，这里'+'运算符的优先级要高于'?'所以运算符，实际上是</span>
<span class="token comment">// 'Value is true'?'Something' : 'Nothing'，当字符串不为空时，转换为bool为true，所以结果</span>
<span class="token comment">// 为'Something'，选D</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">[</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">&quot;, &quot;</span><span class="token punctuation">)</span>

<span class="token comment">// A: &quot;, , , &quot; </span>
<span class="token comment">// B: &quot;undefined, undefined, undefined, undefined&quot; </span>
<span class="token comment">// C: &quot;, , &quot; </span>
<span class="token comment">// D: &quot;&quot;</span>

<span class="token comment">// JavaScript中使用字面量创建数组时，如果最末尾有一个逗号’,’，会被省略，所以实际上这个数组</span>
<span class="token comment">// 只有三个元素（都是undefined）： console.log([,].length);//输出结果：//3 而三个元素，使用</span>
<span class="token comment">// join方法，只需要添加两次，所以结果为&quot;, , &quot;，选C</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">sidEffecting</span><span class="token punctuation">(</span>ary<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  ary<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> ary<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  c <span class="token operator">=</span> <span class="token number">10</span>
  <span class="token function">sidEffecting</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> a <span class="token operator">+</span> b <span class="token operator">+</span> c<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// A: 3 </span>
<span class="token comment">// B: 12 </span>
<span class="token comment">// C: error </span>
<span class="token comment">// D: other</span>

<span class="token comment">// 这题考的是JS的函数arguments的概念： 在调用函数时，函数内部的arguments维护着传递到这</span>
<span class="token comment">// 个函数的参数列表。它看起来是一个数组，但实际上它只是一个有length属性的Object，不从</span>
<span class="token comment">// Array.prototype继承。所以无法使用一些Array.prototype的方法。 arguments对象其内部属性</span>
<span class="token comment">// 以及函数形参创建getter和setter方法，因此改变形参的值会影响到arguments对象的值，反过来</span>
<span class="token comment">// 也是一样 具体例子可以参见Javascript秘密花园#arguments 所以，这里所有的更改都将生效，a</span>
<span class="token comment">// 和c的值都为10，a+b+c的值将为21，选D</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'World!'</span><span class="token punctuation">;</span>
<span class="token comment">// 立即执行函数</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'Jack'</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Goodbye '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 等价于</span>
<span class="token keyword">var</span> name <span class="token operator">=</span> ‘World<span class="token operator">!</span>’<span class="token punctuation">;</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> 
  <span class="token comment">// 作用域中的变量提升</span>
  <span class="token keyword">var</span> name<span class="token punctuation">;</span><span class="token comment">//现在还是undefined</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> name <span class="token operator">===</span> <span class="token string">'undefined'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    name <span class="token operator">=</span> <span class="token string">'Jack'</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Goodbye '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'Hello '</span> <span class="token operator">+</span> name<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

<span class="token comment">// A: Goodbye Jack </span>
<span class="token comment">// B: Hello Jack </span>
<span class="token comment">// C: Hello undefined </span>
<span class="token comment">// D: Hello World</span>

<span class="token comment">// 这题考的是javascript作用域中的变量提升，javascript的作用于中使用var定义的变量都会被提升</span>
<span class="token comment">// 到所有代码的最前面，这样就很好理解了，typeof name ===</span>
<span class="token comment">// ‘undefined’的结果为true，所以最后会输出’Goodbye Jack’，选A</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// 隐式类型转换</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">==</span> <span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;wut&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// A: true </span>
<span class="token comment">// B: false </span>
<span class="token comment">// C: &quot;wut&quot; </span>
<span class="token comment">// D: other</span>

<span class="token comment">// 同样是一道隐式类型转换的题，不过这次考虑的是’'运算符，a本身是一个长度为1的数组，而当数</span>
<span class="token comment">// 组不为空时，其转换成bool值为true。 而左右的转换，会使用如果一个操作值为布尔值，则在比</span>
<span class="token comment">// 较之前先将其转换为数值的规则来转换，Number([0])，也就是0，于是变成了0 == true，结果自</span>
<span class="token comment">// 然是false，所以最终结果为B</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> ary <span class="token operator">=</span> <span class="token function">Array</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
ary<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token operator">=</span><span class="token number">2</span>
ary<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span>elem<span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token keyword">return</span> <span class="token string">'1'</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A: [2, 1, 1] </span>
<span class="token comment">// B: [&quot;1&quot;, &quot;1&quot;, &quot;1&quot;] </span>
<span class="token comment">// C: [2, &quot;1&quot;, &quot;1&quot;] </span>
<span class="token comment">// D: other</span>

<span class="token comment">// 又是考的Array.prototype.map的用法，map在使用的时候，只有数组中被初始化过元素才会被</span>
<span class="token comment">// 触发，其他都是undefined，所以结果为[“1”, undefined ,undefined]，选D</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">111111111111111110000</span><span class="token punctuation">,</span>
b <span class="token operator">=</span> <span class="token number">1111</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A: 111111111111111111111 </span>
<span class="token comment">// B: 111111111111111110000 </span>
<span class="token comment">// C: NaN </span>
<span class="token comment">// D: Infinity</span>

<span class="token comment">// 又是一道考查JavaScript数字的题，由于JavaScript实际上只有一种数字形式IEEE 754标准的64位</span>
<span class="token comment">// 双精度浮点数，其所能表示的整数范围为-253~253(包括边界值)。这里的111111111111111110000已</span>
<span class="token comment">// 经超过了2^53次方，所以会发生精度丢失的情况。综上选B</span>
</code></pre></div><p>以下代码运行结果为</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> x <span class="token operator">=</span> y <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// A: 1, 1 </span>
<span class="token comment">// B: error, error </span>
<span class="token comment">// C: 1, error </span>
<span class="token comment">// D: other</span>

<span class="token comment">// 变量提升和隐式定义全局变量的题，也是一个JavaScript经典的坑… 还是那句话，在作用域内，变</span>
<span class="token comment">// 量定义和函数定义会先行提升，所以里面就变成了: (function(){ var x; y = 1; x = 1; })(); 这点会问</span>
<span class="token comment">// 了，为什么不是var x, y;，这就是坑的地方…这里只会定义第一个变量x，而y则会通过不使用var</span>
<span class="token comment">// 的方式直接使用，于是乎就隐式定义了一个全局变量y 所以，y是全局作用域下，而x则是在函数</span>
<span class="token comment">// 内部，结果就为1, error，选C</span>
</code></pre></div><h2 id="☆-其他类型值转换为字符串时的规则"><a href="#☆-其他类型值转换为字符串时的规则" aria-hidden="true" class="header-anchor">#</a> ☆-其他类型值转换为字符串时的规则</h2><p><code>ToString</code>负责处理非字符串到字符串的<strong>强制类型转换</strong>。</p><ul><li>（1）<code>Null</code> 和 <code>Undefined</code> 类型 ，<code>null</code> 转换为 <code>&quot;null&quot;</code>，<code>undefined</code> 转换为 <code>&quot;undefined&quot;</code>，</li><li>（2）<code>Boolean</code> 类型，<code>true</code> 转换为 <code>&quot;true&quot;</code>，<code>false</code> 转换为 <code>&quot;false&quot;</code>。</li><li>（3）<code>Number</code> 类型的值直接转换，不过那些极小和极大的数字会使用指数形式。</li><li>（4）<code>Symbol</code> 类型的值直接转换，但是只允许显式强制类型转换，使用隐式强制类型转换会产生错误。</li><li>（5）对普通对象来说，除非自行定义 <code>toString()</code> 方法，否则会调用<code>toString((Object.prototype.toString())</code>来返回内部属性 <code>[[Class]]</code> 的值，如<code>&quot;[object Object]&quot;</code>。如果对象有自己的 <code>toString()</code> 方法，字符串化时就会调用该方法并使用其返回值。</li></ul><h2 id="☆-其他类型值转换为数字时的规则"><a href="#☆-其他类型值转换为数字时的规则" aria-hidden="true" class="header-anchor">#</a> ☆-其他类型值转换为数字时的规则</h2><p>将非数字值当作数字来使用，比如数学运算抽象操作 <code>ToNumber</code>。</p><ul><li>（1）<code>Undefined</code> 类型的值转换为 <code>NaN</code>。</li><li>（2）<code>Null</code> 类型的值转换为 <code>0</code>。</li><li>（3）<code>Boolean</code> 类型的值，<code>true</code> 转换为 <code>1</code>，<code>false</code> 转换为 <code>0</code>。</li><li>（4）<code>String</code> 类型的值转换如同使用 <code>Number()</code> 函数进行转换，如果包含非数字值则转换为
<code>NaN</code>，空字符串为 <code>0</code>。</li><li>（5）<code>Symbol</code> 类型的值不能转换为数字，会报错。</li><li>（6）对象（包括数组）会首先被转换为相应的基本类型值，如果返回的是非数字的基本类型值，
则再遵循以上规则将其强制转换为数字。</li></ul><p>为了将值转换为相应的基本类型值，抽象操作 <code>ToPrimitive</code> 会首先（通过内部操作
<code>DefaultValue</code>）检查该值是否有<code>valueOf()</code> 方法。
如果有并且返回基本类型值，就使用该值进行强制类型转换。如果没有就使用<code>toString()</code> 的返回值
（如果存在）来进行强制类型转换.如果 <code>valueOf()</code> 和 <code>toString()</code> 均不返回基本类型值，会产生
<code>TypeError</code> 错误。</p><h2 id="☆-object-is-和-、-的区别"><a href="#☆-object-is-和-、-的区别" aria-hidden="true" class="header-anchor">#</a> ☆-Object.is()和&quot;===&quot;、&quot;==&quot;的区别</h2><ul><li>使用双等号<code>&quot;==&quot;</code>进行相等判断时，如果两边的类型不一致，则会进行强制类型转化后再进行比较。</li><li>使用三等号<code>&quot;===&quot;</code>进行相等判断时，如果两边的类型不一致时，不会做强制类型准换，直接返回 <code>false</code>。</li><li>使用 <code>Object.is</code> 来进行相等判断时，一般情况下<strong>和三等号的判断相同</strong>，它处理了一些特殊的情况，
<ul><li>比如 <code>-0</code> 和 <code>+0</code> 不再相等，</li><li>两 个 <code>NaN</code> 认定为是相等的。</li></ul></li></ul><h2 id="☆-commonjs-模块"><a href="#☆-commonjs-模块" aria-hidden="true" class="header-anchor">#</a> ☆-CommonJS 模块</h2><p><code>Node</code>应用由模块组成，采用<code>CommonJS</code>模块规范。</p><p><code>CommonJS</code>规范规定，每个模块内部，<code>module</code>变量代表当前模块。这个变量是一个对象，它的<code>exports</code>属性（即<code>module.exports</code>）是对外的接口。加载某个模块，其实是加载该模块的<code>module.exports</code>属性。</p><ul><li>模块输出方式：<code>exports</code> 和 <code>module.exports</code></li><li>模块输出方式：<code>require</code></li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">addX</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> value <span class="token operator">+</span> x<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token comment">// 通过module.exports输出变量x和函数addX。</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>x <span class="token operator">=</span> x<span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>addX <span class="token operator">=</span> addX<span class="token punctuation">;</span>
</code></pre></div><p><code>require</code>方法用于加载模块，其实就是加载模块的<code>module.exports</code>属性。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> example <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./example.js'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 5</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>example<span class="token punctuation">.</span><span class="token function">addX</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 6</span>
</code></pre></div><p>为了方便，<strong><code>Node</code>为每个模块提供一个<code>exports</code>变量，指向<code>module.exports</code></strong>。这等同在每个模块头部，有一行这样的命令。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 可以直接在 exports 对象上添加方法，表示对外输出的接口，如同在module.exports上添加一样</span>
<span class="token keyword">var</span> exports <span class="token operator">=</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">;</span>
</code></pre></div><p><strong>注意，不能直接将exports变量指向一个值，因为这样等于切断了exports与module.exports的联系。</strong></p><h3 id="导出基础数据类型"><a href="#导出基础数据类型" aria-hidden="true" class="header-anchor">#</a> 导出基础数据类型</h3><p>对于<strong>原始数据类型</strong>，属于值的拷贝：一旦输出一个值，模块内部的变化就影响不到这个值。原始数据类型的值，会被缓存。</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">let</span> <span class="token function-variable function">incCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token operator">++</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a, 1s后'</span><span class="token punctuation">,</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">,</span> <span class="token comment">// 对count的拷贝：模块内部的变化不影响这个值</span>
  incCount
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b.js</span>
<span class="token keyword">const</span> mod <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> mod<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
mod<span class="token punctuation">.</span><span class="token function">incCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main,incCount后'</span><span class="token punctuation">,</span> mod<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 1</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  mod<span class="token punctuation">.</span>count<span class="token operator">=</span><span class="token number">3</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main, 2s后'</span><span class="token punctuation">,</span> mod<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//3</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>

<span class="token comment">// 打印结果</span>
<span class="token comment">// main 1</span>
<span class="token comment">// main,incCount后 1</span>
<span class="token comment">// a, 1s后 2</span>
<span class="token comment">// main, 2s后 3</span>
</code></pre></div><p><code>main.js</code>获得内部变动后的值，<code>a.js</code>的模块输出如下：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">let</span> <span class="token function-variable function">incCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token operator">++</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a, 1s后'</span><span class="token punctuation">,</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token comment">// 取消对原始数据类型的缓存</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  <span class="token keyword">get</span> <span class="token function">count</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 取值器函数，在main.js中可正确读取内部的变量的变动</span>
    <span class="token keyword">return</span> count
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  incCount
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js的输出</span>
<span class="token comment">// main 1</span>
<span class="token comment">// main,incCount后 2</span>
<span class="token comment">// a, 1s后 2</span>
<span class="token comment">// main, 2s后 2</span>
</code></pre></div><h3 id="导出复杂数据类型"><a href="#导出复杂数据类型" aria-hidden="true" class="header-anchor">#</a> 导出复杂数据类型</h3><p>对于<strong>复杂数据类型，属于浅拷贝。由于两个模块引用的对象指向同一个内存空间，因此对该模块的值做修改时会影响另一个模块。</strong></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b.js</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">incCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b,1s后'</span><span class="token punctuation">,</span>obj<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b,3s后'</span><span class="token punctuation">,</span>obj<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">3000</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  obj<span class="token punctuation">,</span>
  incCount
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// main.js</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span>obj<span class="token punctuation">,</span>incCount<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./b.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main'</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">incCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main,incCount后'</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  obj<span class="token punctuation">.</span>count<span class="token operator">=</span><span class="token number">3</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'main, 2s后'</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
<span class="token comment">// main 1</span>
<span class="token comment">// main,incCount后 2</span>
<span class="token comment">// b,1s后 2</span>
<span class="token comment">// main, 2s后 3</span>
<span class="token comment">// b,3s后 3</span>
</code></pre></div><h3 id="require"><a href="#require" aria-hidden="true" class="header-anchor">#</a> require</h3><ul><li>当使用<code>require</code>命令加载某个模块时，就会运行整个模块的代码。</li><li>当使用<code>require</code>命令加载同一个模块时，不会再执行该模块，而是取到缓存之中的值。也就是说，<strong><code>CommonJS</code>模块无论加载多少次，都只会在第一次加载时运行一次，以后再加载，就返回第一次运行的结果，除非手动清除系统缓存</strong>。</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
<span class="token keyword">let</span> count <span class="token operator">=</span> <span class="token number">1</span>
<span class="token keyword">let</span> <span class="token function-variable function">incCount</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  count<span class="token operator">++</span>
<span class="token punctuation">}</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a, 1s后'</span><span class="token punctuation">,</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">,</span>
  incCount
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> mod <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">111</span><span class="token punctuation">,</span> mod<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
mod<span class="token punctuation">.</span><span class="token function">incCount</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> xxx <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./a.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">222</span><span class="token punctuation">,</span>mod<span class="token punctuation">.</span>count<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">333</span><span class="token punctuation">,</span> xxx<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// 111 1</span>
<span class="token comment">// 222 1</span>
<span class="token comment">// 333 1</span>
<span class="token comment">// a, 1s后 2</span>
</code></pre></div><ul><li>循环加载时，属于加载时执行。即脚本代码在<code>require</code>的时候，就会全部执行。一旦出现某个模块被&quot;循环加载&quot;，就只输出已经执行的部分，还未执行的部分不会输出。</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// x.js</span>
exports<span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./y.js'</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'x'</span><span class="token punctuation">,</span> y<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'x 执行完毕'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// y.js</span>
exports<span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">false</span>

<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./x.js'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'y.js'</span><span class="token punctuation">,</span> x<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>

exports<span class="token punctuation">.</span>done <span class="token operator">=</span> <span class="token boolean">true</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'y.js 执行完毕'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// z.js</span>
<span class="token keyword">let</span> x <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./x'</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> y <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./y'</span><span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'z 执行完毕'</span><span class="token punctuation">,</span>x<span class="token punctuation">.</span>done<span class="token punctuation">,</span>y<span class="token punctuation">.</span>done<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="☆-es6-模块"><a href="#☆-es6-模块" aria-hidden="true" class="header-anchor">#</a> ☆-ES6 模块</h2><ul><li>ES6模块输出方式：<code>export</code>  和 <code>export default</code></li><li>ES6模块输入方式：<code>import ... from ...</code></li></ul><h3 id="es6-模块中的值"><a href="#es6-模块中的值" aria-hidden="true" class="header-anchor">#</a> ES6 模块中的值</h3><ul><li>1、<code>ES6</code>模块中的值属于【动态只读引用】</li><li>2、对于只读来说，即不允许修改引入变量的值，<code>import</code>的变量是只读的，不论是基本数据类型还是复杂数据类型。当模块遇到<code>import</code>命令时，就会生成一个只读引用。等到脚本真正执行时，再根据这个只读引用，到被加载的那个模块里面去取值。</li><li>3、对于动态来说，<strong>原始值发生变化，<code>import</code>加载的值也会发生变化</strong>。不论是基本数据类型还是复杂数据类型。</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// a.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>obj<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./b.js'</span>
<span class="token comment">// obj = {} 报错</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a.js'</span><span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'a,2s后'</span><span class="token punctuation">,</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">2000</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// b.js</span>
<span class="token keyword">export</span> <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
  count<span class="token punctuation">:</span> <span class="token number">1</span>
<span class="token punctuation">}</span>

<span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">,</span> obj<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">;</span>
  obj<span class="token punctuation">.</span>count<span class="token operator">++</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><ul><li>4、循环加载时，<code>ES6</code>模块是动态引用。只要两个模块之间存在某个引用，代码就能够执行。</li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// x.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>bar<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./y.js'</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>foo
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'执行完毕'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// y.js</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span>foo<span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./x.js'</span>
<span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">if</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">&gt;</span><span class="token number">0.5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 执行结果有多重可能</span>
<span class="token comment">// x.js:3 foo</span>
<span class="token comment">// y.js:3 bar</span>
<span class="token comment">// x.js:3 foo</span>
<span class="token comment">// y.js:3 bar</span>
<span class="token comment">// x.js:5 执行完毕</span>
<span class="token comment">// x.js:5 执行完毕</span>
</code></pre></div><h2 id="♥-commonjs模块与es6模块的区别"><a href="#♥-commonjs模块与es6模块的区别" aria-hidden="true" class="header-anchor">#</a> ♥-CommonJS模块与ES6模块的区别</h2><p><a href="https://www.cnblogs.com/unclekeith/p/7679503.html" target="_blank" rel="noopener noreferrer">CommonJS模块与ES6模块的区别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><ul><li>语法不同，<code>ES6 module</code> 导出 是<code>export</code>，<code>import</code>导入；<code>commonjs</code> 导出是<code>module.exports</code>，导入是<code>require</code>；</li><li><code>ES6 module</code>针对 前端，<code>commonjs</code>针对后端；</li><li>加载时机不同，<code>commonjs</code>运行时加载模块，<code>ES6 module</code>编译时加载模块；</li><li><code>commonjs</code>导出基础类型属于值的拷贝，通过getter可以修改，导出复杂数据类型属于值的引用；<code>ES6 module</code>导出一个值的引用，且只读，不能修改；</li><li><code>commonjs</code>一个文件只能导出一个值，即模块中的<code>module.exports</code>属性；<code>ES6 module</code> 可以导出多个。</li></ul><h2 id="☆-commonjs中module-exports和exports的区别"><a href="#☆-commonjs中module-exports和exports的区别" aria-hidden="true" class="header-anchor">#</a> ☆-Commonjs中module.exports和exports的区别</h2><p><a href="https://www.cnblogs.com/fightjianxian/p/12151010.html" target="_blank" rel="noopener noreferrer">Commonjs规范中module.exports和exports的区别<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p><ul><li><code>require</code>只能引入<code>module.exports</code>导出的值，不能引入<code>exports</code>导出的值</li><li><code>module.exports</code> 是一个对象，<code>exports</code>默认则是指向这个对象的引用</li><li><code>module.exports</code>和<code>exports</code>是等价的</li><li>每个导出模块 <code>node.js</code> 默认会返回 <code>return module.exports</code></li></ul><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 写法是一致的，给最初的空对象{}添加了一个属性</span>
exports<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
module<span class="token punctuation">.</span>exports<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">18</span><span class="token punctuation">;</span>
<span class="token comment">// 通过require得到的就是{age: 18}</span>
</code></pre></div><h2 id="☆-请解释原型设计模式"><a href="#☆-请解释原型设计模式" aria-hidden="true" class="header-anchor">#</a> ☆-请解释原型设计模式</h2><p>原型模式可用于创建新对象，但它创建的不是非初始化的对象，而是使用原型对象（或样本对
象）的值进行初始化的对象。原型模式也称为属性模式。</p><p>原型模式在初始化业务对象时非常有用，业务对象的值与数据库中的默认值相匹配。原型对象中
的默认值被复制到新创建的业务对象中。</p><p>经典的编程语言很少使用原型模式，但作为原型语言的 <code>JavaScript</code> 在构造新对象及其原型时使用
了这个模式。</p><h2 id="☆-js判断变量的类型"><a href="#☆-js判断变量的类型" aria-hidden="true" class="header-anchor">#</a> ☆-JS判断变量的类型</h2><ul><li>(1) <strong>使用 typeof 检测</strong> 当需要变量是否是<code>number</code>, <code>string</code>, <code>boolean</code>, <code>function</code>, <code>undefined</code>类型
时，可以使用<code>typeof</code>进行判断。 <code>arr, json, nul, date, reg, error</code> 全部被检测为<code>object</code>类型，其他
的变量能够被正确检测出来。</li><li>(2) <strong>使用 instanceof 检测</strong><code>instanceof</code> 运算符与 <code>typeof</code> 运算符相似，用于识别正在处理的对象的类
型。与 <code>typeof</code> 方法不同的是，<code>instanceof</code> 方法要求开发者<strong>明确地确认对象为某特定类型</strong>。</li><li>(3) <strong>使用 constructor 检测</strong><code>constructor</code>本来是原型对象上的属性，指向构造函数。但是根据实例
对象寻找属性的顺序，若实例对象上没有实例属性或方法时，就去原型链上寻找，因此，实例对象也是能使用<code>constructor</code>属性的。</li></ul><h2 id="♥-防抖与节流"><a href="#♥-防抖与节流" aria-hidden="true" class="header-anchor">#</a> ♥-防抖与节流</h2><p><a href="https://segmentfault.com/a/1190000018428170/" target="_blank" rel="noopener noreferrer">防抖和节流<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>严格算起来应该属于性能优化的知识。实际上遇到的频率相当高，处理不当或者放任不管就容易引起浏览器卡死。</p><h3 id="滚动条案例"><a href="#滚动条案例" aria-hidden="true" class="header-anchor">#</a> 滚动条案例</h3><p>很多网站会提供这么一个按钮：用于返回顶部。这个按钮只会在滚动到距离顶部一定位置之后才出现，那么我们现在抽象出这个功能需求-- <strong>监听浏览器滚动事件，返回当前滚条与顶部的距离</strong></p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">showTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'滚动位置：'</span><span class="token punctuation">,</span> scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> showTop
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// scroll事件的默认执行频率，太高了：点击一次键盘的【向下方向键】，会发现函数执行了8-9次！</span>
<span class="token keyword">let</span> displayEle <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'.display'</span><span class="token punctuation">)</span>
window<span class="token punctuation">.</span><span class="token function-variable function">onscroll</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  window<span class="token punctuation">.</span><span class="token function">requestAnimationFrame</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    displayEle<span class="token punctuation">.</span>style<span class="token punctuation">.</span>display <span class="token operator">=</span> window<span class="token punctuation">.</span>scrollY<span class="token operator">&gt;</span><span class="token number">100</span><span class="token operator">?</span><span class="token string">'block'</span><span class="token punctuation">:</span><span class="token string">'none'</span>
    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">'#totop'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      window<span class="token punctuation">.</span><span class="token function">scrollTo</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>      
<span class="token punctuation">}</span>
</code></pre></div><h3 id="防抖（debounce）"><a href="#防抖（debounce）" aria-hidden="true" class="header-anchor">#</a> 防抖（debounce）</h3><p>对于短时间内连续触发的事件（上面的滚动事件），<strong>防抖</strong>的含义就是让某个时间期限（如上面的1000毫秒）内，事件处理函数只执行一次</p><p>在第一次触发事件时，不立即执行函数，而是给出一个期限值比如<code>200ms</code>，然后：</p><ul><li>如果在<code>200ms</code>内没有再次触发滚动事件，那么就执行函数</li><li>如果在<code>200ms</code>内再次触发滚动事件，那么当前的计时取消，重新开始计时</li></ul><p><strong>优化效果</strong>：如果短时间内大量触发同一事件，只会执行一次函数。</p><p><strong>实现</strong>：既然前面都提到了计时，那实现的关键就在于<code>setTimeout</code>这个函数，由于还需要一个变量来保存计时，考虑维护全局纯净，可以借助闭包来实现：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/*
* fn[function] 需要防抖的函数
* delay[number] 毫秒，防抖期限值
*/</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 闭包</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token comment">// delay内多次触发，取消计时，重新计算</span>
    <span class="token punctuation">}</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>滚动条防抖实现</strong>：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">showTop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> scrollTop <span class="token operator">=</span> document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>scrollTop <span class="token operator">||</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">.</span>scrollTop
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'滚动位置：'</span><span class="token punctuation">,</span> scrollTop<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">function</span> <span class="token function">debounce</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> timer <span class="token operator">=</span> <span class="token keyword">null</span> <span class="token comment">// 闭包</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span><span class="token punctuation">{</span>
      <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token comment">// delay内多次触发，取消计时，重新计算</span>
    <span class="token punctuation">}</span>
    timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">debounce</span><span class="token punctuation">(</span>showTop<span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="节流（throttle）"><a href="#节流（throttle）" aria-hidden="true" class="header-anchor">#</a> 节流（throttle）</h3><p>使用上面的防抖方案来处理问题的结果是：</p><ul><li>如果在限定时间段内，不断触发滚动事件（比如某个用户闲着无聊，按住滚动不断的拖来拖去），只要不停止触发，理论上就永远不会输出当前距离顶部的距离。</li></ul><p>但是如果产品同学的期望处理方案是：即使用户不断拖动滚动条，也能在某个时间间隔之后给出反馈呢？</p><p>可以设计一种类似控制阀门一样定期开放的函数，也就是<strong>让函数执行一次后，在某个时间段内暂时失效，过了这段时间后再重新激活</strong>（类似于技能冷却时间）</p><p><strong>效果</strong>：如果短时间内大量触发同一事件，那么在函数执行一次之后，该函数在指定的时间期限内不再工作，直至过了这段时间才重新生效。</p><p><strong>实现</strong>：这里借助<code>setTimeout</code>来做一个简单的实现，加上一个状态位<code>valid</code>来表示当前函数是否处于工作状态：</p><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">thottle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> valid <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>valide<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
    valid <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      valid <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
window<span class="token punctuation">.</span>onscroll <span class="token operator">=</span> <span class="token function">thottle</span><span class="token punctuation">(</span>fn<span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
</code></pre></div><h3 id="其他应用场景举例"><a href="#其他应用场景举例" aria-hidden="true" class="header-anchor">#</a> 其他应用场景举例</h3><ul><li>搜索框<code>input</code>事件，例如要支持输入实时搜索可以使用节流方案（间隔一段时间就必须查询相关内容），或者实现输入间隔大于某个值（如<code>500ms</code>），就当做用户输入完成，然后开始搜索，具体使用哪种方案要看业务需求。</li><li>页面<code>resize</code>事件，常见于需要做页面适配的时候。需要根据最终呈现的页面情况进行<code>dom</code>渲染（这种情形一般是使用防抖，因为只需要判断最后一次的变化情况）</li></ul><h2 id="☆-window-onload和domcontentloaded区别是什么"><a href="#☆-window-onload和domcontentloaded区别是什么" aria-hidden="true" class="header-anchor">#</a> ☆-Window.onload和DOMContentLoaded区别是什么</h2><ul><li><code>Window.onload</code>网页资源加载完毕后触发，包括<code>html</code>、<code>js</code>、<code>css</code>、图片等</li><li><code>DOMContentLoaded</code>只要<code>DOM</code>结构加载完成后就触发</li></ul></div><div class="page-edit"><!----><!----></div><div class="page-nav"><p class="inner"><span class="prev">
        ← <a href="/docs/resource/css.html" class="prev">
          ☆-CSS&amp;HTML
        </a></span><span class="next"><a href="/docs/resource/react.html">
          ☆-react
        </a> →
      </span></p></div></div></div></div>
    <script src="/docs/assets/js/9.3939e875.js" defer></script><script src="/docs/assets/js/221.2383e08f.js" defer></script><script src="/docs/assets/js/app.acf4c017.js" defer></script>
  </body>
</html>
