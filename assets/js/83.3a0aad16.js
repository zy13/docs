(window.webpackJsonp=window.webpackJsonp||[]).push([[83],{335:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("p",[a("a",{attrs:{href:"https://www.wangdoc.com/javascript/bom/engine.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("链接"),a("OutboundLink")],1)]),t._m(0),t._m(1),t._m(2),t._m(3),a("ul",[a("li",[t._v("script 元素嵌入代码: "),a("router-link",{attrs:{to:"./1-intro.html#_1-1-script-元素嵌入代码"}},[t._v("link")])],1),a("li",[t._v("script 元素加载外部脚本: "),a("router-link",{attrs:{to:"./1-intro.html#_1-2-script-元素加载外部脚本"}},[t._v("link")])],1),a("li",[t._v("事件属性："),a("router-link",{attrs:{to:"./1-intro.html#_1-3-事件属性"}},[t._v("link")])],1),a("li",[t._v("URL 协议："),a("router-link",{attrs:{to:"./1-intro.html#_1-4-url-协议"}},[t._v("link")])],1)]),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),t._m(31),t._m(32),t._m(33),a("ul",[a("li",[t._v("工作原理 - ♥："),a("router-link",{attrs:{to:"./1-intro.html#_2-1-工作原理-♥"}},[t._v("link")])],1),a("li",[t._v("defer 属性："),a("router-link",{attrs:{to:"./1-intro.html#_2-2-defer-属性"}},[t._v("link")])],1),a("li",[t._v("async 属性："),a("router-link",{attrs:{to:"./1-intro.html#_2-3-async-属性"}},[t._v("link")])],1),a("li",[t._v("脚本的动态加载："),a("router-link",{attrs:{to:"./1-intro.html#_2-4-脚本的动态加载"}},[t._v("link")])],1),a("li",[t._v("加载使用的协议："),a("router-link",{attrs:{to:"./1-intro.html#_2-5-加载使用的协议"}},[t._v("link")])],1)]),t._m(34),t._m(35),t._m(36),t._m(37),t._m(38),t._m(39),t._m(40),t._m(41),a("p",[t._v("脚本文件放在页面底部，这样即使遇到脚本失去响应，网页主体的渲染也已经完成了，用户至少可以看到内容，而不是面对一张空白的页面。\n如果某些脚本代码非常重要，一定要放在页面头部的话，最好直接将代码写入页面，而不是连接外部脚本文件，这样能缩短加载时间。")]),a("p",[t._v("脚本文件都放在网页尾部加载，还有一个好处。")]),t._m(42),t._m(43),t._m(44),t._m(45),t._m(46),t._m(47),t._m(48),t._m(49),t._m(50),a("p",[t._v("如果有多个script标签，比如下面这样。")]),t._m(51),t._m(52),t._m(53),t._m(54),t._m(55),t._m(56),t._m(57),t._m(58),t._m(59),t._m(60),t._m(61),t._m(62),t._m(63),t._m(64),t._m(65),t._m(66),t._m(67),t._m(68),t._m(69),t._m(70),t._m(71),t._m(72),t._m(73),t._m(74),t._m(75),t._m(76),t._m(77),t._m(78),t._m(79),t._m(80),t._m(81),a("p",[t._v("如果想为动态加载的脚本指定回调函数，可以使用下面的写法。")]),t._m(82),t._m(83),t._m(84),t._m(85),t._m(86),t._m(87),a("p",[t._v("根据页面本身的协议来决定加载协议，这时可以采用下面的写法。")]),t._m(88),t._m(89),a("ul",[a("li",[t._v("渲染引擎："),a("router-link",{attrs:{to:"./1-intro.html#_3-1-渲染引擎"}},[t._v("link")])],1),a("li",[t._v("重流和重绘 - ♥："),a("router-link",{attrs:{to:"./1-intro.html#_3-2-重流和重绘-♥"}},[t._v("link")])],1),a("li",[t._v("JavaScript引擎 - ♥："),a("router-link",{attrs:{to:"./1-intro.html#_3-3-javascript引擎-♥"}},[t._v("link")])],1)]),t._m(90),t._m(91),t._m(92),t._m(93),t._m(94),t._m(95),a("p",[t._v("以上四步并非严格按顺序执行，往往第一步还没完成，第二步和第三步就已经开始了。所以，会看到这种情况：网页的 HTML 代码还没下载完，但浏览器已经显示出内容了。")]),t._m(96),t._m(97),t._m(98),t._m(99),t._m(100),t._m(101),a("p",[t._v("大多数情况下，浏览器会智能判断，将重流和重绘只限制到相关的子树上面，最小化所耗费的代价，而不会全局重新生成网页。")]),t._m(102),t._m(103),t._m(104),t._m(105),t._m(106),t._m(107),t._m(108),t._m(109),t._m(110),t._m(111),t._m(112),t._m(113),t._m(114),t._m(115),t._m(116),t._m(117),a("p",[t._v("通常，一个程序被经常用到的，只是其中一小部分代码，有了缓存的编译结果，整个程序的运行速度就会显著提升。")]),t._m(118),t._m(119),t._m(120),t._m(121),a("ul",[a("li",[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Chakra_(JScript_engine)",target:"_blank",rel:"noopener noreferrer"}},[t._v("Chakra"),a("OutboundLink")],1),t._v(" (Microsoft Internet Explorer)")]),a("li",[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/WebKit#JavaScriptCore",target:"_blank",rel:"noopener noreferrer"}},[t._v("Nitro/JavaScript Core"),a("OutboundLink")],1),t._v(" (Safari)")]),a("li",[a("a",{attrs:{href:"https://dev.opera.com/articles/carakan/",target:"_blank",rel:"noopener noreferrer"}},[t._v("Carakan"),a("OutboundLink")],1),t._v(" (Opera)")]),a("li",[a("a",{attrs:{href:"https://developer.mozilla.org/en-US/docs/SpiderMonkey",target:"_blank",rel:"noopener noreferrer"}},[t._v("SpiderMonkey"),a("OutboundLink")],1),t._v(" (Firefox)")]),a("li",[a("a",{attrs:{href:"https://en.wikipedia.org/wiki/Chrome_V8",target:"_blank",rel:"noopener noreferrer"}},[t._v("V8"),a("OutboundLink")],1),t._v(" (Chrome, Chromium)")])])])},[function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("JavaScript")]),this._v(" 是浏览器的内置脚本语言。也就是说，浏览器内置了 "),s("code",[this._v("JavaScript")]),this._v(" 引擎，并且提供各种接口，让 "),s("code",[this._v("JavaScript")]),this._v(" 脚本可以控制浏览器的各种功能。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("一旦网页内嵌了 "),s("code",[this._v("JavaScript")]),this._v(" 脚本，浏览器加载网页，就会去执行脚本，从而达到操作浏览器的目的，实现网页的各种动态效果。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("本章开始介绍浏览器提供的各种 "),s("code",[this._v("JavaScript")]),this._v(" 接口。首先，介绍 "),s("code",[this._v("JavaScript")]),this._v(" 代码嵌入网页的方法。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1、代码嵌入网页的方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、代码嵌入网页的方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 1、代码嵌入网页的方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-1-script-元素嵌入代码"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-script-元素嵌入代码","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.1 script 元素嵌入代码")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("<script>")]),this._v("元素内部可以直接写入 JavaScript 代码。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" x "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("5")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("x"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"type属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#type属性","aria-hidden":"true"}},[this._v("#")]),this._v(" type属性")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("<script>")]),this._v("标签有一个"),s("code",[this._v("type")]),this._v("属性，用来指定脚本类型，"),s("code",[this._v("type")]),this._v("属性有两种值：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("text/javascript")]),this._v("：这是默认值。老式浏览器，设为这个值比较好。")]),s("li",[s("code",[this._v("application/javascript")]),this._v("：对于较新的浏览器，建议设为这个值。")]),s("li",[s("code",[this._v("module")]),this._v("(es6)：es6模块化的引用")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果"),s("code",[this._v("type")]),this._v("属性的值，浏览器不认识，那么它不会执行其中的代码。利用这一点，可以在"),s("code",[this._v("<script>")]),this._v("标签之中嵌入任意的文本内容，只要加上一个浏览器不认识的"),s("code",[this._v("type")]),this._v("属性即可。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 此代码浏览器不会执行，也不会显示它的内容，因为不认识它的type属性 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("mydata"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("type")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("x-custom-data"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Hello World'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- \n  但是，这个<script>节点依然存在于 DOM 之中，可以使用<script>节点的text属性读出它的内容：\n  document.getElementById('mydata').text \n--\x3e")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-2-script-元素加载外部脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-script-元素加载外部脚本","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.2 script 元素加载外部脚本")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("<script>")]),t._v("标签也可以指定加载外部的脚本文件。所加载的脚本必须是纯的 "),a("code",[t._v("JavaScript")]),t._v(" 代码，不能有"),a("code",[t._v("HTML")]),t._v("代码和"),a("code",[t._v("<script>")]),t._v("标签。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://www.example.com/script.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 如果脚本文件使用了非英语字符，还应该注明字符的编码。 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://www.example.com/script.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 加载外部脚本和直接添加代码块，这两种方法不能混用。下面代码的console.log语句直接被忽略。 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("charset")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("utf-8"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("example.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n  console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Hello World!'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("安全性问题")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了防止攻击者篡改外部脚本，"),s("code",[this._v("script")]),this._v("标签允许设置一个"),s("code",[this._v("integrity")]),this._v("属性，写入该外部脚本的 "),s("code",[this._v("Hash")]),this._v(" 签名，用来验证脚本的一致性。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- integrity属性指定了外部脚本/assets/application.js的 SHA256 签名 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("/assets/application.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v("\n  "),a("span",{attrs:{class:"token attr-name"}},[t._v("integrity")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("sha256-TvVUHzSfftWg1rcfL6TIJ0XKEGrgLyEq6lEpcmrG9qs="),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-3-事件属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-事件属性","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.3 事件属性")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("网页元素的事件属性（比如"),s("code",[this._v("onclick")]),this._v("和"),s("code",[this._v("onmouseover")]),this._v("），可以写入 "),s("code",[this._v("JavaScript")]),this._v(" 代码。当指定事件发生时，就会调用这些代码。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 事件属性代码只有一个语句。如果有多个语句，使用分号分隔即可。 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("button")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("id")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("myBtn"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("onclick")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("console.log(this.id);"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点击"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("button")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-4-url-协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-url-协议","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.4 URL 协议")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("URL")]),t._v(" 支持"),a("code",[t._v("javascript:")]),t._v("协议，即在 "),a("code",[t._v("URL")]),t._v(" 的位置写入代码，使用这个 "),a("code",[t._v("URL")]),t._v(" 的时候就会执行 "),a("code",[t._v("JavaScript")]),t._v(" 代码。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript:console.log("),a("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v("Hello"),a("span",{attrs:{class:"token punctuation"}},[t._v("'")]),t._v(")"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点击"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("执行协议")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("浏览器的地址栏也可以执行"),s("code",[this._v("javascript:")]),this._v("协议。将"),s("code",[this._v("javascript:console.log('Hello')")]),this._v("放入地址栏，按回车键也会执行这段代码。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果 "),s("code",[this._v("JavaScript")]),this._v(" 代码返回一个字符串，浏览器就会新建一个文档，展示这个字符串的内容，原有文档的内容都会消失。如果返回的不是字符串，那么浏览器不会新建文档，也不会跳转。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 用户点击链接以后，会打开一个新文档\n原有文档的内容都会消失, 返回当前时间，刷新可恢复 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript: new Date().toLocaleTimeString();"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点击"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 如果返回的不是字符串，那么浏览器不会新建文档，也不会跳转。 \n用户点击链接后，网页不会跳转，只会在控制台显示当前时间。--\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript: console.log(new Date().toLocaleTimeString())"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点击"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("strong",[this._v("用途")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("javascript:")]),this._v("协议的常见用途是书签脚本 "),s("code",[this._v("Bookmarklet")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("由于浏览器的书签保存的是一个网址，所以"),s("code",[this._v("javascript:")]),this._v("网址也可以保存在里面，用户选择这个书签的时候，就会在当前页面执行这个脚本。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了防止书签替换掉当前文档，可以在脚本前加上"),s("code",[this._v("void")]),this._v("，或者在脚本最后加上"),s("code",[this._v("void 0")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 点击链接后，执行代码都不会网页跳转。 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript: void new Date().toLocaleTimeString();"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点击"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("a")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("href")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("javascript: new Date().toLocaleTimeString();void 0;"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("点击"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("a")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2、script-元素-♥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、script-元素-♥","aria-hidden":"true"}},[this._v("#")]),this._v(" 2、script 元素 - ♥")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-1-工作原理-♥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-工作原理-♥","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.1 工作原理 - ♥")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("浏览器加载 "),s("code",[this._v("JavaScript")]),this._v(" 脚本，主要通过"),s("code",[this._v("<script>")]),this._v("元素完成。正常的"),s("strong",[this._v("网页加载流程")]),this._v("是这样的：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("浏览器一边下载 "),a("code",[t._v("HTML")]),t._v(" 网页，一边开始解析。也就是说，不等到下载完，就开始解析。")]),a("li",[t._v("解析过程中，浏览器发现"),a("code",[t._v("<script>")]),t._v("元素，就暂停解析，把网页渲染的控制权交给 "),a("code",[t._v("JavaScript")]),t._v(" 引擎。")]),a("li",[t._v("如果"),a("code",[t._v("<script>")]),t._v("元素引用了外部脚本，就下载该脚本再执行，否则就直接执行代码。")]),a("li",[a("code",[t._v("JavaScript")]),t._v(" 引擎执行完毕，控制权交还渲染引擎，恢复往下解析 "),a("code",[t._v("HTML")]),t._v(" 网页。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("浏览器解析DOM，使用的是"),s("strong",[this._v("渲染引擎")]),this._v("，执行js代码，使用的是"),s("strong",[this._v("JavasCript引擎")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"加载外部脚本-♥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#加载外部脚本-♥","aria-hidden":"true"}},[this._v("#")]),s("strong",[this._v("加载外部脚本")]),this._v(" - ♥")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("加载外部脚本时，浏览器会暂停页面渲染，等待脚本下载并执行完成后，再继续渲染。"),a("br"),t._v("\n原因是 "),a("code",[t._v("JavaScript")]),t._v(" 代码可以修改 "),a("code",[t._v("DOM")]),t._v("，所以必须把控制权让给它，"),a("strong",[t._v("否则会导致复杂的线程竞赛的问题。")]),t._v("（线程是非独立的,同一个进程里线程是数据共享的,当各个线程访问数据资源时会出现竞争状态即:数 据几乎同步会被多个线程占用,造成数据混乱,即所谓的线程不安全）")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果外部脚本加载时间很长（一直无法完成下载），那么浏览器就会一直等待脚本下载完成，造成网页长时间失去响应，"),s("strong",[this._v("浏览器就会呈现“假死”状态，这被称为“阻塞效应”")]),this._v("。"),s("strong",[this._v("为了避免这种情况，较好的做法是将"),s("code",[this._v("<script>")]),this._v("标签都放在页面底部，而不是头部。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"脚本文件放在页面底部"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#脚本文件放在页面底部","aria-hidden":"true"}},[this._v("#")]),this._v(" 脚本文件放在页面底部")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("因为在 "),a("code",[t._v("DOM")]),t._v(" 结构生成之前就调用 "),a("code",[t._v("DOM")]),t._v(" 节点，"),a("code",[t._v("JavaScript")]),t._v(" 会报错，如果脚本都在网页尾部加载，就不存在这个问题，因为这时 "),a("code",[t._v("DOM")]),t._v(" 肯定已经生成了。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 代码执行时会报错，因为此时document.body元素还未生成。 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- Cannot read property 'innerHTML' of null --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("body")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("body")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"指定domcontentloaded事件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#指定domcontentloaded事件","aria-hidden":"true"}},[this._v("#")]),this._v(" 指定DOMContentLoaded事件")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("解决上述问题，可以设定"),s("code",[this._v("DOMContentLoaded")]),this._v("事件的回调函数可以。"),s("code",[this._v("DOMContentLoaded")]),this._v("事件只有在 DOM 结构生成之后才会触发。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("head")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n  "),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 指定DOMContentLoaded事件发生后，才开始执行相关代码。 --\x3e")]),t._v("\n  "),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}},[t._v("\n    document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),a("span",{attrs:{class:"token string"}},[t._v("'DOMContentLoaded'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("innerHTML"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n      "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  ")]),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("head")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"使用onload属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#使用onload属性","aria-hidden":"true"}},[this._v("#")]),this._v(" 使用onload属性")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("另一种解决方法是，使用"),a("code",[t._v("<script>")]),t._v("标签的"),a("code",[t._v("onload")]),t._v("属性。当"),a("code",[t._v("<script>")]),t._v("标签指定的外部脚本文件下载和解析完成，会触发一个"),a("code",[t._v("load")]),t._v("事件，可以把所需执行的代码，放在这个事件的回调函数里面。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("jquery.min.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("onload")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("console.log(document.body.innerHTML)"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"脚本执行顺序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#脚本执行顺序","aria-hidden":"true"}},[this._v("#")]),this._v(" 脚本执行顺序")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 浏览器会同时并行下载a.js和b.js --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 不管哪个文件先下载完，都保证先执行a.js，再执行b.js --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("a.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("b.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("脚本的执行顺序由它们在页面中的出现顺序决定，这是为了保证脚本之间的依赖关系不受到破坏。")]),s("li",[this._v("加载这两个脚本都会产生“阻塞效应”，必须等到它们都加载完成，浏览器才会继续页面渲染。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"解析和执行-css"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解析和执行-css","aria-hidden":"true"}},[this._v("#")]),this._v(" 解析和执行 CSS")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("解析和执行 "),s("code",[this._v("CSS")]),this._v("，也会产生阻塞。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[s("code",[this._v("Firefox")]),this._v(" 浏览器会等到脚本前面的所有样式表，都下载并解析完，再执行脚本；")]),s("li",[s("code",[this._v("Webkit")]),this._v("则是一旦发现脚本引用了样式，就会暂停执行脚本，等到样式表下载并解析完，再恢复执行。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"资源下载量"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#资源下载量","aria-hidden":"true"}},[this._v("#")]),this._v(" 资源下载量")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("此外，对于来自"),a("strong",[t._v("同一个域名的资源")]),t._v("，比如脚本文件、样式表文件、图片文件等，浏览器一般有限制，同时最多下载"),a("code",[t._v("6～20")]),t._v("个资源，即最多同时打开的 "),a("code",[t._v("TCP")]),t._v(" 连接有限制，这是为了防止对服务器造成太大压力。如果是来自"),a("strong",[t._v("不同域名的资源")]),t._v("，就没有这个限制。"),a("strong",[t._v("所以，通常把静态文件放在不同的域名之下，以加快下载速度。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-2-defer-属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-defer-属性","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.2 defer 属性")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("为了解决脚本文件下载阻塞网页渲染的问题，一个方法是对"),a("code",[t._v("<script>")]),t._v("元素加入"),a("code",[t._v("defer")]),t._v("属性。它的"),a("strong",[t._v("作用是延迟脚本的执行，等到 DOM 加载生成后，再执行脚本")]),t._v("。有了"),a("code",[t._v("defer")]),t._v("属性，浏览器下载脚本文件的时候，不会阻塞页面渲染。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 等到 DOM 加载完成后，才会执行a.js和b.js --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("a.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("defer")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("b.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("defer")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"defer-属性的运行流程如下"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#defer-属性的运行流程如下","aria-hidden":"true"}},[this._v("#")]),this._v(" defer 属性的运行流程如下:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("浏览器开始解析 "),a("code",[t._v("HTML")]),t._v(" 网页;")]),a("li",[t._v("解析过程中，发现带有"),a("code",[t._v("defer")]),t._v("属性的"),a("code",[t._v("<script>")]),t._v("元素;")]),a("li",[t._v("浏览器继续往下解析 "),a("code",[t._v("HTML")]),t._v(" 网页，同时并行下载"),a("code",[t._v("<script>")]),t._v("元素加载的外部脚本;")]),a("li",[t._v("浏览器完成解析 "),a("code",[t._v("HTML")]),t._v(" 网页，此时再回过头执行已经下载完成的脚本。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下载的脚本文件在"),s("code",[this._v("DOMContentLoaded")]),this._v("事件触发前执行（即刚刚读取完"),s("code",[this._v("</html>")]),this._v("标签），而且可以保证执行顺序就是它们在页面上出现的顺序。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("注意")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("对于内置而不是加载外部脚本的"),a("code",[t._v("script")]),t._v("标签，以及动态生成的"),a("code",[t._v("script")]),t._v("标签，"),a("code",[t._v("defer")]),t._v("属性不起作用。")]),a("li",[t._v("另外，使用"),a("code",[t._v("defer")]),t._v("加载的外部脚本不应该使用"),a("code",[t._v("document.write")]),t._v("方法。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-3-async-属性"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-async-属性","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.3 async 属性")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("解决“阻塞效应”的另一个方法是对"),a("code",[t._v("<script>")]),t._v("元素加入"),a("code",[t._v("async")]),t._v("属性。"),a("code",[t._v("async")]),t._v("属性可以保证脚本下载的同时，浏览器继续渲染。"),a("code",[t._v("async")]),t._v("属性的作用是，使用另一个进程下载脚本，下载时不会阻塞渲染。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- 哪个脚本先下载结束，就先执行那个脚本 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("a.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("async")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("b.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("async")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"async-属性的运行流程："}},[s("a",{staticClass:"header-anchor",attrs:{href:"#async-属性的运行流程：","aria-hidden":"true"}},[this._v("#")]),this._v(" async 属性的运行流程：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("浏览器开始解析 "),a("code",[t._v("HTML")]),t._v(" 网页;")]),a("li",[t._v("解析过程中，发现带有"),a("code",[t._v("async")]),t._v("属性的"),a("code",[t._v("script")]),t._v("标签;")]),a("li",[t._v("浏览器继续往下解析 "),a("code",[t._v("HTML")]),t._v(" 网页，同时并行下载"),a("code",[t._v("<script>")]),t._v("标签中的外部脚本;")]),a("li",[t._v("脚本下载完成，浏览器暂停解析"),a("code",[t._v("HTML")]),t._v(" 网页，开始执行下载的脚本;")]),a("li",[t._v("脚本执行完毕，浏览器恢复解析 "),a("code",[t._v("HTML")]),t._v(" 网页。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"注意"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#注意","aria-hidden":"true"}},[this._v("#")]),this._v(" 注意")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("一旦采用这个属性，就"),a("strong",[t._v("无法保证脚本的执行顺序")]),t._v("。哪个脚本先下载结束，就先执行那个脚本。")]),a("li",[t._v("另外，使用"),a("code",[t._v("async")]),t._v("属性的脚本文件里面的代码，不应该使用"),a("code",[t._v("document.write")]),t._v("方法。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"defer属性和async属性到底应该使用哪一个？"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#defer属性和async属性到底应该使用哪一个？","aria-hidden":"true"}},[this._v("#")]),this._v(" defer属性和async属性到底应该使用哪一个？")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("一般来说，如果脚本之间没有依赖关系，就使用"),a("code",[t._v("async")]),t._v("属性，")]),a("li",[t._v("如果脚本之间有依赖关系，就使用"),a("code",[t._v("defer")]),t._v("属性。")]),a("li",[t._v("如果同时使用"),a("code",[t._v("async")]),t._v("和"),a("code",[t._v("defer")]),t._v("属性，后者不起作用，浏览器行为由"),a("code",[t._v("async")]),t._v("属性决定。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("由此可见，"),s("strong",[s("code",[this._v("async")]),this._v("属性优先级要高于"),s("code",[this._v("defer")]),this._v("属性")]),this._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-4-脚本的动态加载"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-4-脚本的动态加载","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.4 脚本的动态加载")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("<script>")]),this._v("元素还可以动态生成，生成后再插入页面，从而实现脚本的动态加载。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 哪个脚本文件先下载完成，就先执行哪个。")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'a.js'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b.js'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("forEach")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" script "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'script'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  script"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" src"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("这种方法的好处是，动态生成的"),a("code",[t._v("script")]),t._v("标签"),a("strong",[t._v("不会阻塞页面渲染，也就不会造成浏览器假死")]),t._v("。")]),a("li",[t._v("但是问题在于，这种方法"),a("strong",[t._v("无法保证脚本的执行顺序")]),t._v("，哪个脚本文件先下载完成，就先执行哪个。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果想避免这个问题，可以设置"),s("code",[this._v("async")]),this._v("属性为"),s("code",[this._v("false")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 在这段代码后面加载的脚本文件，会等待b.js执行完成后再执行")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'a.js'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'b.js'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("forEach")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" script "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'script'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  script"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" src"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  script"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 保证b.js在a.js后面执行")]),t._v("\n  document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("script"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 为动态加载的脚本指定回调函数")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("loadScript")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("src"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" done"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" js "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("createElement")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'script'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  js"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" src"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  js"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("done")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  js"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("onerror")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token function"}},[t._v("done")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Error")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'Failed to load script '")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" src"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("head"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("appendChild")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("js"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_2-5-加载使用的协议"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-5-加载使用的协议","aria-hidden":"true"}},[this._v("#")]),this._v(" 2.5 加载使用的协议")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果不指定协议，浏览器默认采用 "),s("code",[this._v("HTTP")]),this._v(" 协议下载。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- example.js默认就是采用 HTTP 协议下载 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("example.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("如果要采用 "),s("code",[this._v("HTTPS")]),this._v(" 协议下载，必需写明。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("\x3c!-- example.js 采用 HTTPS 协议下载 --\x3e")]),t._v("\n"),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("https://example.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-html extra-class"},[a("pre",{pre:!0,attrs:{class:"language-html"}},[a("code",[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("<")]),t._v("script")]),t._v(" "),a("span",{attrs:{class:"token attr-name"}},[t._v("src")]),a("span",{attrs:{class:"token attr-value"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("=")]),a("span",{attrs:{class:"token punctuation"}},[t._v('"')]),t._v("//example.js"),a("span",{attrs:{class:"token punctuation"}},[t._v('"')])]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),a("span",{attrs:{class:"token script language-javascript"}}),a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token tag"}},[a("span",{attrs:{class:"token punctuation"}},[t._v("</")]),t._v("script")]),a("span",{attrs:{class:"token punctuation"}},[t._v(">")])]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_3、浏览器的组成-♥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、浏览器的组成-♥","aria-hidden":"true"}},[this._v("#")]),this._v(" 3、浏览器的组成 - ♥")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("浏览器的核心是两部分："),s("strong",[this._v("渲染引擎")]),this._v(" 和 "),s("strong",[this._v("JavaScript 解释器")]),this._v("（又称 JavaScript 引擎）")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-1-渲染引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-渲染引擎","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.1 渲染引擎")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("渲染引擎的主要作用是，将"),s("strong",[this._v("网页代码渲染为用户视觉可以感知的平面文档")]),this._v("。不同的浏览器有不同的渲染引擎：")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("Firefox：Gecko 引擎")]),s("li",[this._v("Safari：WebKit 引擎")]),s("li",[this._v("Chrome：Blink 引擎")]),s("li",[this._v("IE: Trident 引擎")]),s("li",[this._v("Edge: EdgeHTML 引擎")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("渲染引擎处理网页，通常分成四个阶段")]),this._v("：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("解析代码："),a("code",[t._v("HTML")]),t._v(" 代码解析为 "),a("code",[t._v("DOM")]),t._v("，"),a("code",[t._v("CSS")]),t._v(" 代码解析为 "),a("code",[t._v("CSSOM")]),t._v("（CSS Object Model）;")]),a("li",[t._v("对象合成：将 "),a("code",[t._v("DOM")]),t._v(" 和 "),a("code",[t._v("CSSOM")]),t._v(" 合成一棵渲染树（render tree）;")]),a("li",[t._v("布局：计算出渲染树的布局（layout）;")]),a("li",[t._v("绘制：将渲染树绘制到屏幕。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-2-重流和重绘-♥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-重流和重绘-♥","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.2 重流和重绘 - ♥")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("渲染树转换为网页布局，称为“"),s("strong",[this._v("布局流")]),this._v("”（flow）；布局显示到页面的这个过程，称为“"),s("strong",[this._v("绘制")]),this._v("”（paint）。它们都具有阻塞效应，并且会耗费很多时间和计算资源。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"重流和重绘的关系"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#重流和重绘的关系","aria-hidden":"true"}},[this._v("#")]),this._v(" 重流和重绘的关系")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("页面生成以后，脚本操作和样式表操作，都会触发“"),s("strong",[this._v("重流")]),this._v("”（reflow）和“"),s("strong",[this._v("重绘")]),this._v("”（repaint）。用户的互动也会触发重流和重绘，比如设置了鼠标悬停（a:hover）效果、页面滚动、在输入框中输入文本、改变窗口大小等等。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("重流和重绘并不一定一起发生，重流必然导致重绘，重绘不一定需要重流。")]),s("li",[this._v("比如改变元素颜色，只会导致重绘，而不会导致重流；")]),s("li",[this._v("改变元素的布局，则会导致重绘和重流。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"如何降低重绘的次数和成本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#如何降低重绘的次数和成本","aria-hidden":"true"}},[this._v("#")]),this._v(" 如何降低重绘的次数和成本")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("尽量不要变动高层的 "),a("code",[t._v("DOM")]),t._v(" 元素，而以底层 "),a("code",[t._v("DOM")]),t._v(" 元素的变动代替；")]),a("li",[t._v("重绘"),a("code",[t._v("table")]),t._v("布局和"),a("code",[t._v("flex")]),t._v("布局，开销都会比较大。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 该代码只会导致一次重绘，因为浏览器会累积 DOM 变动，然后一次性执行。")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" foo "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'foobar'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfoo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("color "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'blue'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfoo"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("marginTop "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'30px'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"优化技巧"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#优化技巧","aria-hidden":"true"}},[this._v("#")]),this._v(" 优化技巧")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("读取 "),a("code",[t._v("DOM")]),t._v(" 或者写入 "),a("code",[t._v("DOM")]),t._v("，尽量写在一起，不要混杂。不要读取一个 "),a("code",[t._v("DOM")]),t._v(" 节点，然后立刻写入，接着再读取一个 "),a("code",[t._v("DOM")]),t._v(" 节点。")]),a("li",[t._v("缓存 "),a("code",[t._v("DOM")]),t._v(" 信息。")]),a("li",[t._v("不要一项一项地改变样式，而是使用 "),a("code",[t._v("CSS class")]),t._v(" 一次性改变样式。")]),a("li",[t._v("使用文档碎片"),a("code",[t._v("documentFragment")]),t._v("操作 "),a("code",[t._v("DOM")])]),a("li",[t._v("动画使用"),a("code",[t._v("absolute")]),t._v("定位或"),a("code",[t._v("fixed")]),t._v("定位，这样可以减少对其他元素的影响。")]),a("li",[t._v("只在必要时才显示隐藏元素。")]),a("li",[t._v("使用"),a("code",[t._v("window.requestAnimationFrame()")]),t._v("，因为它可以把代码推迟到下一次重绘之前执行，而不是立即要求页面重绘。\n"),a("ul",[a("li",[t._v("“动画的计时控制项；时间控制” - 用于更平滑、更高效展示动画的"),a("code",[t._v("API")])])])]),a("li",[t._v("使用虚拟 "),a("code",[t._v("DOM")]),t._v("（"),a("code",[t._v("virtual DOM")]),t._v("）库。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 重流的代价: 每读一次 DOM，就写入新的值，会造成不停的重流和重绘")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("doubleHeight")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" currentHeight "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight\n  element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentHeight "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'px'")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ndocument"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelectorAll")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("forEach")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("doubleHeight")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("使用"),s("code",[this._v("window.requestAnimationFrame()")]),this._v("对比效果")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 重绘的代价：把所有的写操作，都累积在一起，从而 DOM 代码变动的代价就最小化了")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("doubleHeight")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("element"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" currentHeight "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clientHeight\n  window"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("requestAnimationFrame")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    element"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("style"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("height "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("currentHeight "),a("span",{attrs:{class:"token operator"}},[t._v("*")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("2")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("+")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'px'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\ndocument"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelectorAll")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'a'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("forEach")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item "),a("span",{attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token function"}},[t._v("doubleHeight")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("item"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_3-3-javascript引擎-♥"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-javascript引擎-♥","aria-hidden":"true"}},[this._v("#")]),this._v(" 3.3 JavaScript引擎 - ♥")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("JavaScript")]),this._v(" 引擎的主要作用是，读取网页中的 "),s("code",[this._v("JavaScript")]),this._v(" 代码，对其处理后运行。\n它是一种解释型语言，也就是说，它不需要编译，由解释器实时运行。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("这样的好处是运行和修改都比较方便，刷新页面就可以重新解释；")]),s("li",[this._v("缺点是每次运行都要调用解释器，系统开销较大，运行速度慢于编译型语言。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"早期浏览器内部对javascript的处理过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#早期浏览器内部对javascript的处理过程","aria-hidden":"true"}},[this._v("#")]),this._v(" 早期浏览器内部对JavaScript的处理过程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("为了提高运行速度，目前的浏览器都将 "),s("code",[this._v("JavaScript")]),this._v(" 进行一定程度的编译，生成类似字节码（"),s("code",[this._v("bytecode")]),this._v("）的中间代码，以提高运行速度。以下是早起浏览器内部对JavaScript的处理过程：")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("读取代码，进行词法分析（"),a("code",[t._v("Lexical analysis")]),t._v("），将代码分解成词元（"),a("code",[t._v("token")]),t._v("）;")]),a("li",[t._v("对词元进行语法分析（"),a("code",[t._v("parsing")]),t._v("），将代码整理成“语法树”（"),a("code",[t._v("syntax tree")]),t._v("）;")]),a("li",[t._v("使用“翻译器”（"),a("code",[t._v("translator")]),t._v("），将代码转为字节码（"),a("code",[t._v("bytecode")]),t._v("）;")]),a("li",[t._v("使用“字节码解释器”（"),a("code",[t._v("bytecode interpreter")]),t._v("），将字节码转为机器码。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"现代浏览器对javascript的处理过程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#现代浏览器对javascript的处理过程","aria-hidden":"true"}},[this._v("#")]),this._v(" 现代浏览器对JavaScript的处理过程")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("逐行解释将字节码转为机器码，是很低效的。为了提高运行速度，现代浏览器改为采用“即时编译”（"),s("code",[this._v("Just In Time compiler")]),this._v("，缩写 "),s("code",[this._v("JIT")]),this._v("）:")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("字节码只在运行时编译，用到哪一行就编译哪一行，")]),s("li",[this._v("把编译结果缓存（inline cache）。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h4",{attrs:{id:"javascript引擎"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#javascript引擎","aria-hidden":"true"}},[this._v("#")]),this._v(" JavaScript引擎")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("字节码不能直接运行，而是运行在一个虚拟机（"),s("code",[this._v("Virtual Machine")]),this._v("）之上，一般也把虚拟机称为 "),s("strong",[this._v("JavaScript 引擎")]),this._v("。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[t._v("并非所有的 "),a("code",[t._v("JavaScript")]),t._v(" 虚拟机运行时都有字节码，有的 "),a("code",[t._v("JavaScript")]),t._v(" 虚拟机基于源码，即只要有可能，就通过 "),a("code",[t._v("JIT")]),t._v("（"),a("code",[t._v("just in time")]),t._v("）编译器直接把源码编译成机器码运行，省略字节码步骤。这一点与其他采用虚拟机（比如 "),a("code",[t._v("Java")]),t._v("）的语言不尽相同。这样做的目的，是为了尽可能地优化代码、提高性能。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面是目前最常见的一些 "),s("code",[this._v("JavaScript")]),this._v(" 虚拟机：")])}],!1,null,null,null);s.default=e.exports}}]);