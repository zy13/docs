(window.webpackJsonp=window.webpackJsonp||[]).push([[85],{443:function(t,s,a){"use strict";a.r(s);var n=a(1),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("p",[a("a",{attrs:{href:"https://www.wangdoc.com/javascript/bom/file.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("File 对象，FileList 对象，FileReader 对象"),a("OutboundLink")],1)]),t._m(0),t._m(1),t._m(2),t._m(3),t._m(4),t._m(5),t._m(6),t._m(7),t._m(8),t._m(9),t._m(10),t._m(11),t._m(12),t._m(13),t._m(14),t._m(15),t._m(16),t._m(17),t._m(18),t._m(19),t._m(20),t._m(21),t._m(22),t._m(23),t._m(24),t._m(25),t._m(26),t._m(27),t._m(28),t._m(29),t._m(30),t._m(31),t._m(32),t._m(33),t._m(34)])},[function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_1、file-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、file-对象","aria-hidden":"true"}},[this._v("#")]),this._v(" 1、File 对象")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("构造函数")]),s("li",[this._v("实例属性和实例方法")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("File")]),t._v(" 对象代表一个文件，用来读写文件信息。它继承了 "),a("code",[t._v("Blob")]),t._v(" 对象，或者说是一种特殊的 "),a("code",[t._v("Blob")]),t._v(" 对象，所有可以使用 "),a("code",[t._v("Blob")]),t._v(" 对象的场合都可以使用"),a("code",[t._v("File")]),t._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("最常见的使用场合是"),s("strong",[this._v("表单的文件上传控件")]),this._v("（"),s("code",[this._v('<input type="file">')]),this._v("）")])},function(){var t=this.$createElement,s=this._self._c||t;return s("ul",[s("li",[this._v("用户选中文件以后，浏览器就会生成一个数组，里面是每一个用户选中的文件，它们都是 File 实例对象。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// HTML 代码如下")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v('// <input id="fileItem" type="file">')]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// file是用户选中的第一个文件，它是 File 的实例")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" file "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'fileItem'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfile "),a("span",{attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("File")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-1-构造函数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-构造函数","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.1 构造函数")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("浏览器原生提供一个"),s("code",[this._v("File()")]),this._v("构造函数，用来生成 "),s("code",[this._v("File")]),this._v(" 实例对象。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("File")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("array"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" name "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" options"),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("File()")]),this._v("构造函数接受三个参数:")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("array")]),t._v("：一个数组，成员可以是二进制对象或字符串，表示文件的内容。")]),a("li",[a("code",[t._v("name")]),t._v("：字符串，表示文件名或文件路径。")]),a("li",[a("code",[t._v("options")]),t._v("：配置对象，设置实例的属性。该参数可选，可以设置两个属性\n"),a("ul",[a("li",[a("code",[t._v("type")]),t._v("：字符串，表示实例对象的 "),a("code",[t._v("MIME")]),t._v(" 类型，默认值为空字符串。")]),a("li",[a("code",[t._v("lastModified")]),t._v("：时间戳，表示上次修改的时间，默认为"),a("code",[t._v("Date.now()")]),t._v("。")])])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" file "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("File")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token string"}},[t._v("'foo'")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 文件的内容，成员可以是二进制对象或字符串")]),t._v("\n  "),a("span",{attrs:{class:"token string"}},[t._v("'foo.txt'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// 文件名或文件路径")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    type"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'text/plain'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h3",{attrs:{id:"_1-2-实例属性和实例方法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-实例属性和实例方法","aria-hidden":"true"}},[this._v("#")]),this._v(" 1.2 实例属性和实例方法")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("File")]),this._v(" 对象有以下实例属性。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("File.lastModified")]),t._v("：最后修改时间，时间戳")]),a("li",[a("code",[t._v("File.name")]),t._v("：文件名或文件路径")]),a("li",[t._v("F"),a("code",[t._v("ile.size")]),t._v("：文件大小（单位字节）")]),a("li",[a("code",[t._v("File.type")]),t._v("：文件的 "),a("code",[t._v("MIME")]),t._v(" 类型")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// 由于`myFile`的内容为空，也没有设置 `MIME` 类型，")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 所以`size`属性等于`0`，`type`属性等于空字符串。")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" myFile "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("File")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v("'file.bin'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  lastModified"),a("span",{attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("Date")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token number"}},[t._v("2018")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token number"}},[t._v("1")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nmyFile"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lastModified "),a("span",{attrs:{class:"token comment"}},[t._v("// 1517414400000")]),t._v("\nmyFile"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("name "),a("span",{attrs:{class:"token comment"}},[t._v('// "file.bin"')]),t._v("\nmyFile"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size "),a("span",{attrs:{class:"token comment"}},[t._v("// 0")]),t._v("\nmyFile"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("type "),a("span",{attrs:{class:"token comment"}},[t._v('// ""')]),t._v("\n")])])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("p",[a("code",[t._v("File")]),t._v(" 对象没有自己的实例方法，由于继承了 "),a("code",[t._v("Blob")]),t._v(" 对象，因此可以使用 "),a("code",[t._v("Blob")]),t._v(" 的实例方法"),a("code",[t._v("slice()")]),t._v("。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_2、filelist-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、filelist-对象","aria-hidden":"true"}},[this._v("#")]),this._v(" 2、FileList 对象")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("FileList")]),this._v("对象是一个类似数组的对象，代表一组选中的文件，每个成员都是一个 "),s("code",[this._v("File")]),this._v(" 实例。它主要出现在两个场合。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("文件控件节点（"),a("code",[t._v('<input type="file">')]),t._v("）的"),a("code",[t._v("files")]),t._v("属性，返回一个 "),a("code",[t._v("FileList")]),t._v(" 实例。")]),a("li",[t._v("拖拉一组文件时，目标区的"),a("code",[t._v("DataTransfer.files")]),t._v("属性，返回一个 "),a("code",[t._v("FileList")]),t._v(" 实例。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// HTML 代码如下")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v('// <input id="fileItem" type="file">')]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 文件控件的`files`属性是一个 `FileList` 实例")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" files "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("getElementById")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'fileItem'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\nfiles "),a("span",{attrs:{class:"token keyword"}},[t._v("instanceof")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("FileList")]),t._v(" "),a("span",{attrs:{class:"token comment"}},[t._v("// true")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("FileList")]),this._v(" 的实例属性主要是"),s("code",[this._v("length")]),this._v("，表示包含多少个文件。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("FileList")]),this._v(" 的实例方法主要是"),s("code",[this._v("item()")]),this._v("，用来返回指定位置的实例。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[t._v("它接受一个整数作为参数，表示位置的序号（从零开始）。")]),a("li",[t._v("但是，由于 "),a("code",[t._v("FileList")]),t._v(" 的实例是一个类似数组的对象，可以直接用方括号运算符，即"),a("code",[t._v("myFileList[0]")]),t._v("等同于"),a("code",[t._v("myFileList.item(0)")]),t._v("，所以一般用不到"),a("code",[t._v("item()")]),t._v("方法。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("h2",{attrs:{id:"_3、filereader-对象"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、filereader-对象","aria-hidden":"true"}},[this._v("#")]),this._v(" 3、FileReader 对象")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("code",[this._v("FileReader")]),this._v(" 对象用于读取 "),s("code",[this._v("File")]),this._v(" 对象或 "),s("code",[this._v("Blob")]),this._v(" 对象所包含的文件内容。")])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("浏览器原生提供一个"),s("code",[this._v("FileReader")]),this._v("构造函数，用来生成 "),s("code",[this._v("FileReader")]),this._v(" 实例。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" reader "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("FileReader")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("FileReader 有以下的实例属性")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("FileReader.error")]),t._v("：读取文件时产生的错误对象")]),a("li",[a("code",[t._v("FileReader.readyState")]),t._v("：整数，表示读取文件时的当前状态。一共有三种可能的状态，\n"),a("ul",[a("li",[a("code",[t._v("0")]),t._v("表示尚未加载任何数据，")]),a("li",[a("code",[t._v("1")]),t._v("表示数据正在加载，")]),a("li",[a("code",[t._v("2")]),t._v("表示加载完成。")])])]),a("li",[a("code",[t._v("FileReader.result")]),t._v("：读取完成后的文件内容，有可能是字符串，也可能是一个 "),a("code",[t._v("ArrayBuffer")]),t._v(" 实例。")]),a("li",[a("code",[t._v("FileReader.onabort")]),t._v("："),a("code",[t._v("abort")]),t._v("事件（用户终止读取操作）的监听函数。")]),a("li",[a("code",[t._v("FileReader.onerror")]),t._v("："),a("code",[t._v("error")]),t._v("事件（读取错误）的监听函数。")]),a("li",[a("code",[t._v("FileReader.onload")]),t._v("："),a("code",[t._v("load")]),t._v("事件（读取操作完成）的监听函数，通常在这个函数里面使用"),a("code",[t._v("result")]),t._v("属性，拿到文件内容。")]),a("li",[a("code",[t._v("FileReader.onloadstart")]),t._v("："),a("code",[t._v("loadstart")]),t._v("事件（读取操作开始）的监听函数。")]),a("li",[a("code",[t._v("FileReader.onloadend")]),t._v("："),a("code",[t._v("loadend")]),t._v("事件（读取操作结束）的监听函数。")]),a("li",[a("code",[t._v("FileReader.onprogress")]),t._v("："),a("code",[t._v("progress")]),t._v("事件（读取操作进行中）的监听函数。")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[this._v("下面是监听"),s("code",[this._v("load")]),this._v("事件的一个例子。")])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v("// HTML 代码如下")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v('// <input type="file" onchange="onChange(event)">')]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 每当文件控件发生变化，就尝试读取第一个文件。")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 如果读取成功（load事件发生），就打印出文件内容。")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("onChange")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" file "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" event"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" reader "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("FileReader")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  reader"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function-variable function"}},[t._v("onload")]),t._v(" "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    console"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("log")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("event"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("target"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  reader"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("readAsText")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",[s("strong",[this._v("FileReader有以下实例方法")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ul",[a("li",[a("code",[t._v("FileReader.abort()")]),t._v("：终止读取操作，"),a("code",[t._v("readyState")]),t._v("属性将变成"),a("code",[t._v("2")]),t._v("。")]),a("li",[a("code",[t._v("FileReader.readAsArrayBuffer()")]),t._v("：以 "),a("code",[t._v("ArrayBuffer")]),t._v(" 的格式读取文件，读取完成后"),a("code",[t._v("result")]),t._v("属性将返回一个 "),a("code",[t._v("ArrayBuffer")]),t._v(" 实例。")]),a("li",[a("code",[t._v("FileReader.readAsBinaryString()")]),t._v("：读取完成后，"),a("code",[t._v("result")]),t._v("属性将返回原始的二进制字符串。")]),a("li",[a("code",[t._v("FileReader.readAsDataURL()")]),t._v("：读取完成后，"),a("code",[t._v("result")]),t._v("属性将返回一个 "),a("code",[t._v("Data URL")]),t._v(" 格式（"),a("code",[t._v("Base64")]),t._v(" 编码）的字符串，代表文件内容。对于图片文件，这个字符串可以用于"),a("code",[t._v("<img>")]),t._v("元素的"),a("code",[t._v("src")]),t._v("属性。注意，这个字符串不能直接进行 "),a("code",[t._v("Base64")]),t._v(" 解码，必须把前缀"),a("code",[t._v("data:*/*;base64")]),t._v(",从字符串里删除以后，再进行解码。")]),a("li",[a("code",[t._v("FileReader.readAsText()")]),t._v("：读取完成后，"),a("code",[t._v("result")]),t._v("属性将返回文件内容的文本字符串。该方法的第一个参数是代表文件的 "),a("code",[t._v("Blob")]),t._v(" 实例，第二个参数是可选的，表示文本编码，默认为 "),a("code",[t._v("UTF-8")]),t._v("。")])])},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"language-js extra-class"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{attrs:{class:"token comment"}},[t._v('/* HTML 代码如下\n  <input type="file" onchange="previewFile()">\n  <img src="" height="200">\n*/')]),t._v("\n\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 用户选中图片文件以后，脚本会自动读取文件内容，")]),t._v("\n"),a("span",{attrs:{class:"token comment"}},[t._v("// 然后作为一个 Data URL 赋值给<img>元素的src属性，从而把图片展示出来。")]),t._v("\n"),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token function"}},[t._v("previewFile")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" preview "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'img'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" file    "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" document"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("querySelector")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'input[type=file]'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("files"),a("span",{attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{attrs:{class:"token number"}},[t._v("0")]),a("span",{attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("var")]),t._v(" reader  "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{attrs:{class:"token class-name"}},[t._v("FileReader")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  reader"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("addEventListener")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token string"}},[t._v("'load'")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    preview"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("src "),a("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" reader"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("result"),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{attrs:{class:"token boolean"}},[t._v("false")]),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n\n  "),a("span",{attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    reader"),a("span",{attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{attrs:{class:"token function"}},[t._v("readAsDataURL")]),a("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("file"),a("span",{attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])])}],!1,null,null,null);s.default=e.exports}}]);